(function(A,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(A=typeof globalThis!="undefined"?globalThis:A||self,o(A.VNetworkGraph={},A.Vue))})(this,function(A,o){"use strict";var Wd=Object.defineProperty,Ud=Object.defineProperties;var Gd=Object.getOwnPropertyDescriptors;var Pr=Object.getOwnPropertySymbols;var Xd=Object.prototype.hasOwnProperty,qd=Object.prototype.propertyIsEnumerable;var Q=Math.pow,xr=(A,o,q)=>o in A?Wd(A,o,{enumerable:!0,configurable:!0,writable:!0,value:q}):A[o]=q,K=(A,o)=>{for(var q in o||(o={}))Xd.call(o,q)&&xr(A,q,o[q]);if(Pr)for(var q of Pr(o))qd.call(o,q)&&xr(A,q,o[q]);return A},it=(A,o)=>Ud(A,Gd(o));var ce=(A,o,q)=>new Promise((ue,Z)=>{var st=de=>{try{Me(q.next(de))}catch(Fe){Z(Fe)}},Bt=de=>{try{Me(q.throw(de))}catch(Fe){Z(Fe)}},Me=de=>de.done?ue(de.value):Promise.resolve(de.value).then(st,Bt);Me((q=q.apply(A,o)).next())});const q=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function ue(e){return o.isReactive(e)?e:o.reactive(e)}function Z(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const st=Symbol("containers");function Bt(e){o.provide(st,e)}function Me(){const e=Z(o.inject(st),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}var de=typeof global=="object"&&global&&global.Object===Object&&global,Fe=typeof self=="object"&&self&&self.Object===Object&&self,ie=de||Fe||Function("return this")(),be=ie.Symbol,Sn=Object.prototype,Mr=Sn.hasOwnProperty,Cr=Sn.toString,We=be?be.toStringTag:void 0;function Tr(e){var t=Mr.call(e,We),n=e[We];try{e[We]=void 0;var r=!0}catch(s){}var i=Cr.call(e);return r&&(t?e[We]=n:delete e[We]),i}var Or=Object.prototype,_r=Or.toString;function Br(e){return _r.call(e)}var zr="[object Null]",Ir="[object Undefined]",Pn=be?be.toStringTag:void 0;function Ce(e){return e==null?e===void 0?Ir:zr:Pn&&Pn in Object(e)?Tr(e):Br(e)}function ye(e){return e!=null&&typeof e=="object"}var $r="[object Symbol]";function xn(e){return typeof e=="symbol"||ye(e)&&Ce(e)==$r}function Ar(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Te=Array.isArray,Lr=1/0,Mn=be?be.prototype:void 0,Cn=Mn?Mn.toString:void 0;function Tn(e){if(typeof e=="string")return e;if(Te(e))return Ar(e,Tn)+"";if(xn(e))return Cn?Cn.call(e):"";var t=e+"";return t=="0"&&1/e==-Lr?"-0":t}var Nr=/\s/;function jr(e){for(var t=e.length;t--&&Nr.test(e.charAt(t)););return t}var Dr=/^\s+/;function Zr(e){return e&&e.slice(0,jr(e)+1).replace(Dr,"")}function fe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var On=NaN,Rr=/^[-+]0x[0-9a-f]+$/i,Vr=/^0b[01]+$/i,Hr=/^0o[0-7]+$/i,Fr=parseInt;function at(e){if(typeof e=="number")return e;if(xn(e))return On;if(fe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Zr(e);var n=Vr.test(e);return n||Hr.test(e)?Fr(e.slice(2),n?2:8):Rr.test(e)?On:+e}var _n=1/0,Wr=17976931348623157e292;function Ur(e){if(!e)return e===0?e:0;if(e=at(e),e===_n||e===-_n){var t=e<0?-1:1;return t*Wr}return e===e?e:0}function Bn(e){var t=Ur(e),n=t%1;return t===t?n?t-n:t:0}function zn(e){return e}var Gr="[object AsyncFunction]",Xr="[object Function]",qr="[object GeneratorFunction]",Kr="[object Proxy]";function zt(e){if(!fe(e))return!1;var t=Ce(e);return t==Xr||t==qr||t==Gr||t==Kr}var It=ie["__core-js_shared__"],In=function(){var e=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Yr(e){return!!In&&In in e}var Qr=Function.prototype,Jr=Qr.toString;function Oe(e){if(e!=null){try{return Jr.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var ei=/[\\^$.*+?()[\]{}|]/g,ti=/^\[object .+?Constructor\]$/,ni=Function.prototype,oi=Object.prototype,ri=ni.toString,ii=oi.hasOwnProperty,si=RegExp("^"+ri.call(ii).replace(ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ai(e){if(!fe(e)||Yr(e))return!1;var t=zt(e)?si:ti;return t.test(Oe(e))}function li(e,t){return e==null?void 0:e[t]}function _e(e,t){var n=li(e,t);return ai(n)?n:void 0}var $t=_e(ie,"WeakMap"),$n=Object.create,ci=function(){function e(){}return function(t){if(!fe(t))return{};if($n)return $n(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ui(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function di(){}function fi(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var hi=800,pi=16,gi=Date.now;function mi(e){var t=0,n=0;return function(){var r=gi(),i=pi-(r-n);if(n=r,i>0){if(++t>=hi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function vi(e){return function(){return e}}var lt=function(){try{var e=_e(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),bi=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:vi(t),writable:!0})}:zn,yi=mi(bi);function wi(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function Ei(e){return e!==e}function ki(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function Si(e,t,n){return t===t?ki(e,t,n):wi(e,Ei,n)}function Pi(e,t){var n=e==null?0:e.length;return!!n&&Si(e,t,0)>-1}var xi=9007199254740991,Mi=/^(?:0|[1-9]\d*)$/;function An(e,t){var n=typeof e;return t=t==null?xi:t,!!t&&(n=="number"||n!="symbol"&&Mi.test(e))&&e>-1&&e%1==0&&e<t}function At(e,t,n){t=="__proto__"&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ue(e,t){return e===t||e!==e&&t!==t}var Ci=Object.prototype,Ti=Ci.hasOwnProperty;function Oi(e,t,n){var r=e[t];(!(Ti.call(e,t)&&Ue(r,n))||n===void 0&&!(t in e))&&At(e,t,n)}function _i(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=void 0;c===void 0&&(c=e[l]),i?At(n,l,c):Oi(n,l,c)}return n}var Ln=Math.max;function Bi(e,t,n){return t=Ln(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Ln(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),ui(e,this,l)}}function zi(e,t){return yi(Bi(e,t,zn),e+"")}var Ii=9007199254740991;function Nn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ii}function ct(e){return e!=null&&Nn(e.length)&&!zt(e)}function $i(e,t,n){if(!fe(n))return!1;var r=typeof t;return(r=="number"?ct(n)&&An(t,n.length):r=="string"&&t in n)?Ue(n[t],e):!1}function jn(e){return zi(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&$i(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,s)}return t})}var Ai=Object.prototype;function Lt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ai;return e===n}function Li(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ni="[object Arguments]";function Dn(e){return ye(e)&&Ce(e)==Ni}var Zn=Object.prototype,ji=Zn.hasOwnProperty,Di=Zn.propertyIsEnumerable,Nt=Dn(function(){return arguments}())?Dn:function(e){return ye(e)&&ji.call(e,"callee")&&!Di.call(e,"callee")};function Zi(){return!1}var Rn=typeof A=="object"&&A&&!A.nodeType&&A,Vn=Rn&&typeof module=="object"&&module&&!module.nodeType&&module,Ri=Vn&&Vn.exports===Rn,Hn=Ri?ie.Buffer:void 0,Vi=Hn?Hn.isBuffer:void 0,ut=Vi||Zi,Hi="[object Arguments]",Fi="[object Array]",Wi="[object Boolean]",Ui="[object Date]",Gi="[object Error]",Xi="[object Function]",qi="[object Map]",Ki="[object Number]",Yi="[object Object]",Qi="[object RegExp]",Ji="[object Set]",es="[object String]",ts="[object WeakMap]",ns="[object ArrayBuffer]",os="[object DataView]",rs="[object Float32Array]",is="[object Float64Array]",ss="[object Int8Array]",as="[object Int16Array]",ls="[object Int32Array]",cs="[object Uint8Array]",us="[object Uint8ClampedArray]",ds="[object Uint16Array]",fs="[object Uint32Array]",F={};F[rs]=F[is]=F[ss]=F[as]=F[ls]=F[cs]=F[us]=F[ds]=F[fs]=!0,F[Hi]=F[Fi]=F[ns]=F[Wi]=F[os]=F[Ui]=F[Gi]=F[Xi]=F[qi]=F[Ki]=F[Yi]=F[Qi]=F[Ji]=F[es]=F[ts]=!1;function hs(e){return ye(e)&&Nn(e.length)&&!!F[Ce(e)]}function ps(e){return function(t){return e(t)}}var Fn=typeof A=="object"&&A&&!A.nodeType&&A,Ge=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,gs=Ge&&Ge.exports===Fn,jt=gs&&de.process,Wn=function(){try{var e=Ge&&Ge.require&&Ge.require("util").types;return e||jt&&jt.binding&&jt.binding("util")}catch(t){}}(),Un=Wn&&Wn.isTypedArray,Dt=Un?ps(Un):hs,ms=Object.prototype,vs=ms.hasOwnProperty;function Gn(e,t){var n=Te(e),r=!n&&Nt(e),i=!n&&!r&&ut(e),s=!n&&!r&&!i&&Dt(e),a=n||r||i||s,l=a?Li(e.length,String):[],c=l.length;for(var f in e)(t||vs.call(e,f))&&!(a&&(f=="length"||i&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||An(f,c)))&&l.push(f);return l}function Xn(e,t){return function(n){return e(t(n))}}var bs=Xn(Object.keys,Object),ys=Object.prototype,ws=ys.hasOwnProperty;function Es(e){if(!Lt(e))return bs(e);var t=[];for(var n in Object(e))ws.call(e,n)&&n!="constructor"&&t.push(n);return t}function ks(e){return ct(e)?Gn(e):Es(e)}function Ss(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Ps=Object.prototype,xs=Ps.hasOwnProperty;function Ms(e){if(!fe(e))return Ss(e);var t=Lt(e),n=[];for(var r in e)r=="constructor"&&(t||!xs.call(e,r))||n.push(r);return n}function qn(e){return ct(e)?Gn(e,!0):Ms(e)}var Xe=_e(Object,"create");function Cs(){this.__data__=Xe?Xe(null):{},this.size=0}function Ts(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Os="__lodash_hash_undefined__",_s=Object.prototype,Bs=_s.hasOwnProperty;function zs(e){var t=this.__data__;if(Xe){var n=t[e];return n===Os?void 0:n}return Bs.call(t,e)?t[e]:void 0}var Is=Object.prototype,$s=Is.hasOwnProperty;function As(e){var t=this.__data__;return Xe?t[e]!==void 0:$s.call(t,e)}var Ls="__lodash_hash_undefined__";function Ns(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Xe&&t===void 0?Ls:t,this}function Be(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Be.prototype.clear=Cs,Be.prototype.delete=Ts,Be.prototype.get=zs,Be.prototype.has=As,Be.prototype.set=Ns;function js(){this.__data__=[],this.size=0}function dt(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}var Ds=Array.prototype,Zs=Ds.splice;function Rs(e){var t=this.__data__,n=dt(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Zs.call(t,n,1),--this.size,!0}function Vs(e){var t=this.__data__,n=dt(t,e);return n<0?void 0:t[n][1]}function Hs(e){return dt(this.__data__,e)>-1}function Fs(e,t){var n=this.__data__,r=dt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=js,pe.prototype.delete=Rs,pe.prototype.get=Vs,pe.prototype.has=Hs,pe.prototype.set=Fs;var qe=_e(ie,"Map");function Ws(){this.size=0,this.__data__={hash:new Be,map:new(qe||pe),string:new Be}}function Us(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ft(e,t){var n=e.__data__;return Us(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Gs(e){var t=ft(this,e).delete(e);return this.size-=t?1:0,t}function Xs(e){return ft(this,e).get(e)}function qs(e){return ft(this,e).has(e)}function Ks(e,t){var n=ft(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function ze(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ze.prototype.clear=Ws,ze.prototype.delete=Gs,ze.prototype.get=Xs,ze.prototype.has=qs,ze.prototype.set=Ks;function Kn(e){return e==null?"":Tn(e)}function Ys(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Yn=Xn(Object.getPrototypeOf,Object),Qs="[object Object]",Js=Function.prototype,ea=Object.prototype,Qn=Js.toString,ta=ea.hasOwnProperty,na=Qn.call(Object);function Jn(e){if(!ye(e)||Ce(e)!=Qs)return!1;var t=Yn(e);if(t===null)return!0;var n=ta.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Qn.call(n)==na}function oa(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var ra=ie.isFinite,ia=Math.min;function sa(e){var t=Math[e];return function(n,r){if(n=at(n),r=r==null?0:ia(Bn(r),292),r&&ra(n)){var i=(Kn(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(Kn(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var aa=Math.ceil,la=Math.max;function Zt(e,t,n){t===void 0?t=1:t=la(Bn(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,a=Array(aa(r/t));i<r;)a[s++]=oa(e,i,i+=t);return a}function ca(){this.__data__=new pe,this.size=0}function ua(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function da(e){return this.__data__.get(e)}function fa(e){return this.__data__.has(e)}var ha=200;function pa(e,t){var n=this.__data__;if(n instanceof pe){var r=n.__data__;if(!qe||r.length<ha-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ze(r)}return n.set(e,t),this.size=n.size,this}function ge(e){var t=this.__data__=new pe(e);this.size=t.size}ge.prototype.clear=ca,ge.prototype.delete=ua,ge.prototype.get=da,ge.prototype.has=fa,ge.prototype.set=pa;var eo=typeof A=="object"&&A&&!A.nodeType&&A,to=eo&&typeof module=="object"&&module&&!module.nodeType&&module,ga=to&&to.exports===eo,no=ga?ie.Buffer:void 0;no&&no.allocUnsafe;function ma(e,t){return e.slice()}function va(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function ba(){return[]}var ya=Object.prototype,wa=ya.propertyIsEnumerable,oo=Object.getOwnPropertySymbols,Ea=oo?function(e){return e==null?[]:(e=Object(e),va(oo(e),function(t){return wa.call(e,t)}))}:ba;function ka(e,t,n){var r=t(e);return Te(e)?r:Ys(r,n(e))}function ro(e){return ka(e,ks,Ea)}var Rt=_e(ie,"DataView"),Vt=_e(ie,"Promise"),Ne=_e(ie,"Set"),io="[object Map]",Sa="[object Object]",so="[object Promise]",ao="[object Set]",lo="[object WeakMap]",co="[object DataView]",Pa=Oe(Rt),xa=Oe(qe),Ma=Oe(Vt),Ca=Oe(Ne),Ta=Oe($t),we=Ce;(Rt&&we(new Rt(new ArrayBuffer(1)))!=co||qe&&we(new qe)!=io||Vt&&we(Vt.resolve())!=so||Ne&&we(new Ne)!=ao||$t&&we(new $t)!=lo)&&(we=function(e){var t=Ce(e),n=t==Sa?e.constructor:void 0,r=n?Oe(n):"";if(r)switch(r){case Pa:return co;case xa:return io;case Ma:return so;case Ca:return ao;case Ta:return lo}return t});var ht=ie.Uint8Array;function Oa(e){var t=new e.constructor(e.byteLength);return new ht(t).set(new ht(e)),t}function _a(e,t){var n=Oa(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function Ba(e){return typeof e.constructor=="function"&&!Lt(e)?ci(Yn(e)):{}}var za="__lodash_hash_undefined__";function Ia(e){return this.__data__.set(e,za),this}function $a(e){return this.__data__.has(e)}function Ke(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ze;++t<n;)this.add(e[t])}Ke.prototype.add=Ke.prototype.push=Ia,Ke.prototype.has=$a;function Aa(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function uo(e,t){return e.has(t)}var La=1,Na=2;function fo(e,t,n,r,i,s){var a=n&La,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var f=s.get(e),u=s.get(t);if(f&&u)return f==t&&u==e;var h=-1,d=!0,g=n&Na?new Ke:void 0;for(s.set(e,t),s.set(t,e);++h<l;){var E=e[h],k=t[h];if(r)var w=a?r(k,E,h,t,e,s):r(E,k,h,e,t,s);if(w!==void 0){if(w)continue;d=!1;break}if(g){if(!Aa(t,function(m,y){if(!uo(g,y)&&(E===m||i(E,m,n,r,s)))return g.push(y)})){d=!1;break}}else if(!(E===k||i(E,k,n,r,s))){d=!1;break}}return s.delete(e),s.delete(t),d}function ja(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Ht(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Da=1,Za=2,Ra="[object Boolean]",Va="[object Date]",Ha="[object Error]",Fa="[object Map]",Wa="[object Number]",Ua="[object RegExp]",Ga="[object Set]",Xa="[object String]",qa="[object Symbol]",Ka="[object ArrayBuffer]",Ya="[object DataView]",ho=be?be.prototype:void 0,Ft=ho?ho.valueOf:void 0;function Qa(e,t,n,r,i,s,a){switch(n){case Ya:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ka:return!(e.byteLength!=t.byteLength||!s(new ht(e),new ht(t)));case Ra:case Va:case Wa:return Ue(+e,+t);case Ha:return e.name==t.name&&e.message==t.message;case Ua:case Xa:return e==t+"";case Fa:var l=ja;case Ga:var c=r&Da;if(l||(l=Ht),e.size!=t.size&&!c)return!1;var f=a.get(e);if(f)return f==t;r|=Za,a.set(e,t);var u=fo(l(e),l(t),r,i,s,a);return a.delete(e),u;case qa:if(Ft)return Ft.call(e)==Ft.call(t)}return!1}var Ja=1,el=Object.prototype,tl=el.hasOwnProperty;function nl(e,t,n,r,i,s){var a=n&Ja,l=ro(e),c=l.length,f=ro(t),u=f.length;if(c!=u&&!a)return!1;for(var h=c;h--;){var d=l[h];if(!(a?d in t:tl.call(t,d)))return!1}var g=s.get(e),E=s.get(t);if(g&&E)return g==t&&E==e;var k=!0;s.set(e,t),s.set(t,e);for(var w=a;++h<c;){d=l[h];var m=e[d],y=t[d];if(r)var S=a?r(y,m,d,t,e,s):r(m,y,d,e,t,s);if(!(S===void 0?m===y||i(m,y,n,r,s):S)){k=!1;break}w||(w=d=="constructor")}if(k&&!w){var b=e.constructor,p=t.constructor;b!=p&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof p=="function"&&p instanceof p)&&(k=!1)}return s.delete(e),s.delete(t),k}var ol=1,po="[object Arguments]",go="[object Array]",pt="[object Object]",rl=Object.prototype,mo=rl.hasOwnProperty;function il(e,t,n,r,i,s){var a=Te(e),l=Te(t),c=a?go:we(e),f=l?go:we(t);c=c==po?pt:c,f=f==po?pt:f;var u=c==pt,h=f==pt,d=c==f;if(d&&ut(e)){if(!ut(t))return!1;a=!0,u=!1}if(d&&!u)return s||(s=new ge),a||Dt(e)?fo(e,t,n,r,i,s):Qa(e,t,c,n,r,i,s);if(!(n&ol)){var g=u&&mo.call(e,"__wrapped__"),E=h&&mo.call(t,"__wrapped__");if(g||E){var k=g?e.value():e,w=E?t.value():t;return s||(s=new ge),i(k,w,n,r,s)}}return d?(s||(s=new ge),nl(e,t,n,r,i,s)):!1}function vo(e,t,n,r,i){return e===t?!0:e==null||t==null||!ye(e)&&!ye(t)?e!==e&&t!==t:il(e,t,n,r,vo,i)}function sl(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),l=a.length;l--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return t}}var al=sl(),Wt=function(){return ie.Date.now()},ll="Expected a function",cl=Math.max,ul=Math.min;function dl(e,t,n){var r,i,s,a,l,c,f=0,u=!1,h=!1,d=!0;if(typeof e!="function")throw new TypeError(ll);t=at(t)||0,fe(n)&&(u=!!n.leading,h="maxWait"in n,s=h?cl(at(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function g(v){var P=r,M=i;return r=i=void 0,f=v,a=e.apply(M,P),a}function E(v){return f=v,l=setTimeout(m,t),u?g(v):a}function k(v){var P=v-c,M=v-f,_=t-P;return h?ul(_,s-M):_}function w(v){var P=v-c,M=v-f;return c===void 0||P>=t||P<0||h&&M>=s}function m(){var v=Wt();if(w(v))return y(v);l=setTimeout(m,k(v))}function y(v){return l=void 0,d&&r?g(v):(r=i=void 0,a)}function S(){l!==void 0&&clearTimeout(l),f=0,r=c=i=l=void 0}function b(){return l===void 0?a:y(Wt())}function p(){var v=Wt(),P=w(v);if(r=arguments,i=this,c=v,P){if(l===void 0)return E(c);if(h)return clearTimeout(l),l=setTimeout(m,t),g(c)}return l===void 0&&(l=setTimeout(m,t)),a}return p.cancel=S,p.flush=b,p}function Ut(e,t,n){(n!==void 0&&!Ue(e[t],n)||n===void 0&&!(t in e))&&At(e,t,n)}function fl(e){return ye(e)&&ct(e)}function Gt(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function hl(e){return _i(e,qn(e))}function pl(e,t,n,r,i,s,a){var l=Gt(e,n),c=Gt(t,n),f=a.get(c);if(f){Ut(e,n,f);return}var u=s?s(l,c,n+"",e,t,a):void 0,h=u===void 0;if(h){var d=Te(c),g=!d&&ut(c),E=!d&&!g&&Dt(c);u=c,d||g||E?Te(l)?u=l:fl(l)?u=fi(l):g?(h=!1,u=ma(c)):E?(h=!1,u=_a(c)):u=[]:Jn(c)||Nt(c)?(u=l,Nt(l)?u=hl(l):(!fe(l)||zt(l))&&(u=Ba(c))):h=!1}h&&(a.set(c,u),i(u,c,r,s,a),a.delete(c)),Ut(e,n,u)}function Xt(e,t,n,r,i){e!==t&&al(t,function(s,a){if(i||(i=new ge),fe(s))pl(e,t,a,n,Xt,r,i);else{var l=r?r(Gt(e,a),s,a+"",e,t,i):void 0;l===void 0&&(l=s),Ut(e,a,l)}},qn)}var gl=jn(function(e,t,n,r){Xt(e,t,n,r)});function Ee(e,t){return vo(e,t)}var bo=jn(function(e,t,n){Xt(e,t,n)}),yo=sa("round"),ml=1/0,vl=Ne&&1/Ht(new Ne([,-0]))[1]==ml?function(e){return new Ne(e)}:di,bl=200;function yl(e,t,n){var r=-1,i=Pi,s=e.length,a=!0,l=[],c=l;if(s>=bl){var f=vl(e);if(f)return Ht(f);a=!1,i=uo,c=new Ke}else c=l;e:for(;++r<s;){var u=e[r],h=u;if(u=u!==0?u:0,a&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue e;l.push(u)}else i(c,h,n)||(c!==l&&c.push(h),l.push(u))}return l}function wl(e){return e&&e.length?yl(e):[]}class O{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(r=>r instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([r,i])=>[r,i instanceof Function?i(n):i]))}}var I=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))(I||{});function gt(e){const t={};return Object.assign(t,e(t))}function El(e){return e}function kl(e){return e}function wo(e,t,n){const r=O.values(t.normal,e);return r.type=="circle"?{width:r.radius*2*n,height:r.radius*2*n}:{width:r.width*n,height:r.height*n}}function Sl(e,t,n,r){const s=Math.abs(e.x-n.x)<t.width/2+r.width/2,l=Math.abs(e.y-n.y)<t.height/2+r.height/2;return s&&l}function Ye(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(r=>parseInt(r)*t).filter(r=>!isNaN(r)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function mt(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(r=>parseInt(r)).filter(r=>!isNaN(r));n.length%2===0?t=n.reduce((r,i)=>r+i,0):t=n.reduce((r,i)=>r+i,0)*2}else t=e*2;return t}const Eo=20;class qt{activate(t){const{nodePositions:n,nodes:r,configs:i,emitter:s,scale:a,svgPanZoom:l}=t,c=h=>{for(const[d,g]of Object.entries(h)){const E=this.getOrCreateNodePosition(n,d);this.setNodePosition(E,g)}},f=h=>{const d=h.filter(k=>!(k in n.value)),g=l.getViewArea(),E=a.value;for(const k of d){const w=r.value[k],m=wo(w,i.node,E),y=K({},g.center);for(;;){let b=!1;for(const[p,v]of Object.entries(n.value)){if(k===p)continue;const P=r.value[p];if(!P)continue;const M=wo(P,i.node,E);if(b=Sl(y,m,v,M),b)break}if(b)y.x+=m.width+Eo*E,y.x+m.width/2>g.box.right&&(y.x=g.center.x,y.y+=m.height+Eo*E);else break}const S=this.getOrCreateNodePosition(n,k);this.setNodePosition(S,y)}};f(Object.keys(r.value));const u=o.watch(()=>Ee(new Set(Object.keys(r.value)),new Set(Object.keys(n.value))),h=>{h||f(Object.keys(r.value))});s.on("node:dragstart",c),s.on("node:pointermove",c),s.on("node:dragend",c),this.onDeactivate=()=>{u(),s.off("node:dragstart",c),s.off("node:pointermove",c),s.off("node:dragend",c)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=yo(n.x,3),t.value.y=yo(n.y,3)}getOrCreateNodePosition(t,n){const r=o.toRef(t.value,n);return r.value||(r.value={x:0,y:0}),r}}function ko(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",fitContentMargin:"8%",autoPanOnResize:!0,layoutHandler:new qt,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:gt(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>O.value(e.normal.type,t),radius:t=>{var n;return((n=O.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=O.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=O.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=O.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>O.value(e.normal.strokeWidth,t),strokeColor:t=>O.value(e.normal.strokeColor,t),strokeDasharray:t=>O.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:I.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:gt(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>O.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>O.value(e.normal.dasharray,t),linecap:t=>O.value(e.normal.linecap,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selected:{width:t=>O.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=O.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>O.value(e.normal.linecap,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:gt(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:o.reactive({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],r=t.edges.map(i=>i.split("").reduce((s,a)=>(s=(s<<5)-s+a.charCodeAt(0),s&s),0)).reduce((i,s)=>i+s,0);return n[Math.abs(r)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>O.value(e.path.width,t),color:t=>O.value(e.path.color,t),dasharray:t=>O.value(e.path.dasharray,t),linecap:t=>O.value(e.path.linecap,t),linejoin:t=>O.value(e.path.linejoin,t),animate:t=>O.value(e.path.animate,t),animationSpeed:t=>O.value(e.path.animationSpeed,t)},hover:{width:t=>O.value(e.normal.width,t)+2,color:t=>O.value(e.normal.color,t),dasharray:t=>O.value(e.normal.dasharray,t),linecap:t=>O.value(e.normal.linecap,t),linejoin:t=>O.value(e.normal.linejoin,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selected:{width:t=>O.value(e.normal.width,t)+2,color:t=>O.value(e.normal.color,t),dasharray:"6 12",linecap:t=>O.value(e.normal.linecap,t),linejoin:t=>O.value(e.normal.linejoin,t),animate:t=>O.value(e.normal.animate,t),animationSpeed:t=>O.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function Pl(e){const t=ko();return e&&bo(t,e),t}const So=Symbol("style");function xl(e,t){return Jn(e)?bo(e,t):t}function Ml(e){const t=o.reactive(ko()),n=Object.keys(t);for(const r of n)o.watch(()=>e.value[r],()=>{gl(t[r],e.value[r]||{},xl)},{immediate:!0,deep:!0});return o.provide(So,t),t}function vt(e){return Z(o.inject(So),`Configs(${e})`)[e]}function Cl(){return vt("view")}function bt(){return vt("node")}function yt(){return vt("edge")}function Po(){return vt("path")}let Tl=1;function Ol(){return Tl++}function ee(e){return Object.entries(e)}function wt(e,t){const n=new Set(Object.keys(e));ee(t).forEach(([r,i])=>{Ee(e[r],i)||(e[r]=i),n.delete(r)}),n.forEach(r=>delete e[r])}function _l(e){return e instanceof Promise||e&&typeof e.then=="function"}function Bl(e,t,n){const r=ue({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return o.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:s}=Il(n,e.value,t.value);wt(r.edgeLayoutPoints,i),wt(r.edgeGroups,s)}),o.watchEffect(()=>{const i={};for(const[s,{edges:a,groupWidth:l}]of Object.entries(r.edgeGroups)){let c=!1;if(l==0)c=!1;else if(n.edge.summarize instanceof Function){const f=n.edge.summarize(a,n);f===null?c=xo(e.value,a,n,l):c=f}else n.edge.summarize?c=xo(e.value,a,n,l):c=!1;r.edgeGroups[s].summarize=c,c&&Object.keys(a).forEach(f=>i[f]=!0)}wt(r.summarizedEdges,i)}),r}function zl(e,t,n,r,i,s){return e?t?Mo(e.edge,n,r,i,0,0,s):Mo(e.edge,n,r,i,e.groupWidth,e.pointInGroup,s):{p1:{x:0,y:0},p2:{x:0,y:0}}}function Il(e,t,n){const r={},i={},s={};for(const[l,c]of Object.entries(n)){if(!(c.source in t&&c.target in t))continue;const f=[c.source,c.target].sort().join("<=>"),u=s[f]||{};u[l]=c,s[f]=u}const a=e.edge.gap instanceof Function?e.edge.gap:(l,c)=>e.edge.gap;for(const[l,c]of Object.entries(s)){const f=Object.keys(c).length;if(f==0)continue;const u=a(c,e),[h,d]=Object.entries(c)[0];if(f===1)r[h]={edge:d,pointInGroup:0,groupWidth:0},i[l]={edges:c,groupWidth:0,summarize:!1};else{let g=0;const E=Object.entries(c).map(([m,y])=>{let S=O.value(e.edge.normal.width,y);return isNaN(+S)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",m,S),S=1),S/2}),k=Object.entries(c).map(([m,y],S)=>(S>0&&(g+=E[S-1]+u+E[S]),[m,y,g])),w=g;k.forEach(([m,y,S])=>{r[m]={edge:y,pointInGroup:S,groupWidth:w}}),i[l]={edges:c,groupWidth:w,summarize:!1}}}return{edgeLayoutPoints:r,edgeGroups:i}}function xo(e,t,n,r){if(Object.entries(t).length===1)return!1;const s=Math.min(...Object.values(t).flatMap(a=>[e[a.source],e[a.target]]).filter(a=>a).map(a=>{const l=O.values(n.node.normal,a);return l.type==="circle"?l.radius*2:Math.min(l.width,l.height)}));return r>s}function Mo(e,t,n,r,i,s,a){var h,d,g,E,k,w,m,y;let l,c,f,u;return e.source<e.target?[l,c,f,u]=Co((h=t==null?void 0:t.x)!=null?h:0,(d=t==null?void 0:t.y)!=null?d:0,(g=n==null?void 0:n.x)!=null?g:0,(E=n==null?void 0:n.y)!=null?E:0,r,i,s,a):[f,u,l,c]=Co((k=n==null?void 0:n.x)!=null?k:0,(w=n==null?void 0:n.y)!=null?w:0,(m=t==null?void 0:t.x)!=null?m:0,(y=t==null?void 0:t.y)!=null?y:0,r,i,s,a),{p1:{x:l,y:c},p2:{x:f,y:u}}}function Co(e,t,n,r,i,s,a,l){const c=n-e,f=r-t;let u=(s/2-a)*i;if(u!==0&&l!=="clock"){const h=Math.atan2(r-t,n-e);if(l==="vertical"){const d=Math.PI/2;(h<-d||h>=d)&&(u*=-1)}else l==="horizontal"&&h<0&&(u*=-1)}if(c===0){const h=f<0?-1:1;return[e+u*h,t,n+u*h,r]}else if(f===0){const h=c<0?1:-1;return[e,t+u*h,n,r+u*h]}else{const d=-1/(f/c);f<0&&(u=-u);const g=u/Math.sqrt(1+Math.pow(d,2));return[e+g,t+g*d,n+g,r+g*d]}}function To(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function Kt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function Oo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function _o(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function Yt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function Bo(e,t){return e.x*t.x+e.y*t.y}function zo(e,t){return e.x*t.y-e.y*t.x}function Qt(e){return e.x*e.x+e.y*e.y}function Jt(e){return Math.sqrt(Qt(e))}function en(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Io(e,t){return Math.sqrt(en(e,t))}function $o(e,t){t||(t={x:0,y:0});const n=Jt(e);return n===0?(t.x=1,t.y=0):Yt(e,{x:n,y:n},t),t}function Et(e,t,n){n||(n={x:0,y:0});const r=e.x*Math.cos(t)-e.y*Math.sin(t),i=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=r,n.y=i,n}const $l=180/Math.PI;function Al(e){return e*$l}function tn(e){return Math.atan2(e.y,e.x)}function nn(e){return Al(tn(e))}const Ll=Object.freeze(Object.defineProperty({__proto__:null,add:To,angle:tn,angleDegree:nn,cross:zo,distance:Io,distanceSquared:en,divide:Yt,dot:Bo,length:Jt,lengthSquared:Qt,multiply:Oo,multiplyScalar:_o,normalize:$o,rotate:Et,subtract:Kt},Symbol.toStringTag,{value:"Module"}));class j{static fromArray(t){return new j(t[0]||0,t[1]||0)}static fromObject(t){return new j(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return To(this,t,this)}subtract(t){return Kt(this,t,this)}multiply(t){return Oo(this,t,this)}multiplyScalar(t){return _o(this,t,this)}divide(t){return Yt(this,t,this)}dot(t){return Bo(this,t)}cross(t){return zo(this,t)}lengthSquared(){return Qt(this)}length(){return Jt(this)}distanceSquared(t){return en(this,t)}distance(t){return Io(this,t)}normalize(){return $o(this,this)}angle(){return tn(this)}angleDegree(){return nn(this)}rotate(t){return Et(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new j(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const U=K({Vector2D:j},Ll);class W{constructor(t,n,r){this.source=t,this.target=n,this.v=r}static fromLinePosition(t){const n=j.fromObject(t.p1),r=j.fromObject(t.p2);return new W(n,r,je(n,r))}static fromPositions(t,n){const r=j.fromObject(t),i=j.fromObject(n);return new W(r,i,je(r,i))}static fromVectors(t,n){return new W(t,n,je(t,n))}}function je(e,t){return t.clone().subtract(e)}function Nl(e){return[j.fromObject(e.p1),j.fromObject(e.p2)]}function jl(e){return new j((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function kt(e,t){return{p1:e,p2:t}}function on(e,t,n){const r=W.fromLinePosition(e);return Dl(r,t,n)}function Dl(e,t,n){const r=e.v.clone().normalize(),i=e.source.clone().add(r.clone().multiplyScalar(t)),s=e.target.clone().subtract(r.clone().multiplyScalar(n));let a=i.toObject(),l=s.toObject();const c=je(i,s);if(e.v.angle()*c.angle()<0){const f=new j((a.x+l.x)/2,(a.y+l.y)/2),u=f.clone().add(r.multiplyScalar(.5));a=f.toObject(),l=u.toObject()}return{p1:a,p2:l}}function Zl(e){return{p1:e.p2,p2:e.p1}}function Qe(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return W.fromVectors(e.target,e.target.clone().add(t))}function rn(e,t){const n=t.v.clone().normalize(),r=t.source,i=U.subtract(e,r),s=n.dot(i);return r.clone().add(n.multiplyScalar(s))}function St(e,t,n,r){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const a=W.fromVectors(e,t),l=rn(n,a),c=U.length(U.subtract(l,n));if(r<c)return null;if(r===c)return l;const f=Math.sqrt(Q(r,2)-Q(c,2)),u=a.v.normalize().multiplyScalar(f);return l.subtract(u)}function Rl(e,t,n,r,i){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const l=W.fromVectors(e,t),c=rn(n,l),f=U.length(U.subtract(c,n));if(r<f)return null;if(r===f)return c;const u=Math.sqrt(Q(r,2)-Q(f,2)),h=l.v.normalize().multiplyScalar(u),d=c.clone().add(h),g=c.clone().subtract(h),E=i.distance(d),k=i.distance(g);return Math.abs(E-k)<2?g:E<k?d:g}function Ie(e,t){const n=U.subtract(t.source,e.source),r=e.v,i=t.v,s=U.cross(n,r)/U.cross(r,i);return t.source.clone().add(i.clone().multiplyScalar(s))}function Je(e,t,n,r,i){const s=e,l=n.clone().subtract(s),c=l.length(),f=t+r;if(f<c)return null;const u=Math.abs(t-r);if(c<u)return null;if(c===f){const v=l.clone().normalize(),P=e.clone().add(v.multiplyScalar(t));return i?P:[P,P]}if(c===u){const v=l.clone().normalize(),P=t>r,M=e.clone().add(v.multiplyScalar(P?t:-t));return i?M:[M,M]}const h=t,d=r,g=(Q(c,2)+Q(h,2)-Q(d,2))/(2*c*h),E=h*g,k=Math.sqrt(Q(h,2)-Q(E,2)),w=l.clone().normalize(),m=new j(-w.y,w.x),y=w.clone().multiplyScalar(E),S=m.clone().multiplyScalar(k),b=e.clone().add(y).add(S),p=e.clone().add(y).subtract(S);if(i){const v=b.distance(i),P=p.distance(i);return v<P?b:p}else return[b,p]}function Ao(e,t,n,r){const i=W.fromPositions(e,t),s=(n.width+n.strokeWidth)/2*r,a=(n.height+n.strokeWidth)/2*r,l=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*r:0,c=(i.v.angle()-Math.PI/2)%Math.PI,f=Math.PI/2-c%Math.PI,u=a*Math.abs(Math.tan(c)),h=s*Math.abs(Math.tan(f)),d=u<=s-l,g=h<=a-l;if(d||g||l===0)return Math.sqrt(d?Q(a,2)+Q(u,2):Q(s,2)+Q(h,2));{const E=t.x-s+l,k=t.y-a+l,w=t.x+s-l,m=t.y+a-l,y=[new j(E,k),new j(w,k),new j(w,m),new j(E,m)],S=Math.floor((i.v.angleDegree()+360)%360/90),b=y[S],p=St(i.source,rn(b,i),b,l);return p?je(p,i.target).length():je(b,i.target).length()+l}}function Lo(e,t,n,r,i){const s=W.fromLinePosition(e),a=s.v.clone().normalize(),l=r===0?s.source:s.source.clone().add(a.clone().multiplyScalar(r*i)),c=r===0?s.target:s.target.clone().subtract(a.clone().multiplyScalar(r*i)),f=(t.width/2+n)*i,u=new j(-a.y,a.x).multiplyScalar(f);let h=U.subtract(l,u),d=U.add(l,u),g=U.subtract(c,u),E=U.add(c,u);const k=s.v.angleDegree();return(k<-90||k>=90)&&([h,d]=[d,h],[g,E]=[E,g]),{source:{above:h,below:d},target:{above:g,below:E}}}function Vl(e,t,n,r){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=Ao(t,e,n,1);let s;return r.type==="circle"?s=r.radius+r.strokeWidth/2:s=Ao(e,t,r,1),[i,s]}function ke(e,t,n){const{x:r,y:i}=e,s=r-t.x,a=i-t.y;return{x:s*Math.cos(n)-a*Math.sin(n)+t.x,y:s*Math.sin(n)+a*Math.cos(n)+t.y}}function sn(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function an(e,t,n,r){const i=[],s=W.fromVectors(t,e),a=W.fromVectors(t,n);let l=De(s,a);r*l<0&&(l=sn(l));const c=j.fromObject(ke(e,t,-l/2)),f=W.fromVectors(t,c),u=Qe(f),h=De(s,f);let d=Qe(s);if(Math.abs(h)<Math.PI/2){const E=Ie(d,u);i.push(E)}else{const E=j.fromObject(ke(c,t,h/2)),k=Qe(W.fromVectors(t,j.fromObject(E))),w=Ie(d,k),m=Ie(k,u);i.push(w,E,m)}i.push(c);const g=De(a,f);if(d=Qe(a),Math.abs(g)<Math.PI/2){const E=Ie(d,u);i.push(E)}else{const E=j.fromObject(ke(c,t,g/2)),k=Qe(W.fromVectors(t,j.fromObject(E))),w=Ie(u,k),m=Ie(k,d);i.push(w,E,m)}return i}function De(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function Hl(e,t,n){const r=e.x,i=e.y,s=t.x,a=t.y,l=n.x,c=n.y,f=r-s,u=i-a,h=l-s,d=c-a;if(f===0&&u===0||h===0&&d===0)return[e,0];const g=(d*(f*(r+s)+u*(i+a))-u*(h*(l+s)+d*(c+a)))/(2*f*d-2*u*h),E=(-h*(f*(r+s)+u*(i+a))+f*(h*(l+s)+d*(c+a)))/(2*f*d-2*u*h),k=Math.sqrt(Math.pow(r-g,2)+Math.pow(i-E,2));return[new j(g,E),k]}function Ze(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function Fl(e){const t=Object.values(e);if(t.length===0)return{top:0,bottom:0,left:0,right:0};const n={top:t[0].y,bottom:t[0].y,left:t[0].x,right:t[0].x};return t.forEach(r=>{n.top=Math.min(r.y,n.top),n.bottom=Math.max(r.y,n.bottom),n.left=Math.min(r.x,n.left),n.right=Math.max(r.x,n.right)}),n}function Pt(...e){return e.find(t=>!!t)}const Wl=Number.EPSILON*100;function Ul(e,t,n,r,i,s,a,l){var k,w;const c=e.edges,f=e.directions,u=c.map((m,y)=>Xl(m,f[y],r[m.edgeId])),h=[];let d=!1,g=!1;{const m=u[0];let y=Ze(t[m.source].shape)*i;const S=l+(a==="edgeOfNode"?y:0),b=S<=0?m.line.source:Do(m,S,n,!0);h.push(b),y=Ze(t[m.target].shape)*i,l>0&&U.distance(m.line.source,m.line.target)<=S+y&&(d=!0)}const E=c.length;for(let m=1;m<E;m++){const y=u[m-1],S=u[m],b=S.source,p=j.fromObject((k=n[b])!=null?k:{x:0,y:0}),v=Gl(y,S,p),P=Ze(t[b].shape)*i,M=Math.max(P*(2/3),P-4*i),_=ln(y),C=ln(S),T=xt(y,p,M,_),B=xt(S,p,M,!C),L=xt(y,p,P,_),H=xt(S,p,P,!C);let N;if(v){const R=U.distance(v,p);if(R<M)N=[Pt(T,L,y.line.target),v,Pt(B,H,S.line.source)];else if(R<=P){let ae,J;L&&T?ae=U.distance(v,T)<U.distance(v,L)?T:L:ae=L||y.line.target,H&&B?J=U.distance(v,B)<U.distance(v,H)?B:H:J=H||S.line.source,N=[ae,v,J]}else T&&B?N=[T,p,B]:L&&H?N=[L,p,H]:N=[Pt(T,L,y.line.target),p,Pt(B,H,S.line.source)]}else T&&B?N=[T,p,B]:L&&H?N=[L,p,H]:N=[y.line.target,p,S.line.source];if(y.curve){const R=h[h.length-1];if(R){const ae=R instanceof Array?R[R.length-1]:R;let J;N instanceof Array?J=s?N[0]:N[1]:J=N;const he=an(ae,y.curve.circle.center,J,y.curve.theta);N instanceof Array&&s?h.push([...he,...N]):h.push([...he,J])}}else if(y.loop){const[R,ae,J]=Ro(p,y,P);h.push(R),h.push(J),N instanceof Array&&s?h.push([ae,N[1],N[2]]):h.push(N[2])}else s||!(N instanceof Array)?h.push(N):S.curve?h.push(N[1]):S.loop?h.push(N[0]):h.push(N[0],N[2])}{const m=u[u.length-1];let y=Ze(t[m.target].shape)*i;const S=l+(a==="edgeOfNode"?y:0),b=S<=0?m.line.target:Do(m,S,n,!1);if(y=Ze(t[m.source].shape)*i,m.loop){const p=j.fromObject((w=n[m.target])!=null?w:{x:0,y:0}),[v,P,M]=Ro(p,m,y);h.push(v),h.push(M)}else if(m.curve){const p=h[h.length-1],v=p instanceof Array?p[p.length-1]:p,P=an(v,m.curve.circle.center,b,m.curve.theta);h.push([...P,b])}else h.push(b);l>0&&U.distance(m.line.source,m.line.target)<=S+y&&(g=!0)}return d&&(h.shift(),h[0]instanceof Array&&h.unshift(h[0][0])),g&&h.pop(),h}function No(e){const t=e.length;if(t===0)return[];if(t<=1)return[!0];const n=[];let r=null,i=!0;for(let s=0;s<t;s++){const a=e[s].edge.source,l=e[s].edge.target;if(s===0)if(t>2){const c=jo(e,0);c===null?i=!0:i=c===l}else i=[e[1].edge.source,e[1].edge.target].includes(l);else a===l?i=!0:i=r===a;n.push(i),r=i?l:a}return n}function jo(e,t){const n=e[t],r=e[t+1],i=[n.edge.source,n.edge.target].sort(),s=[r.edge.source,r.edge.target].sort();if(i[0]===i[1])return i[0];if(s[0]===s[1])return s[0];if(n.edgeId===r.edgeId||i[0]===s[0]&&i[1]===s[1]){if(t>=e.length-2)return null;{const a=jo(e,t+1);return a===null?null:a===i[1]?i[0]:i[1]}}else return s.includes(i[1])?i[1]:i[0]}function Do(e,t,n,r){const i=r?e.source:e.target,s=e.curve;if(s){let a=t/s.circle.radius;return s.theta>0&&(a*=-1),r||(a*=-1),j.fromObject(ke(r?e.line.source:e.line.target,s.circle.center,a))}else{let a,l;if(r?(a=e.line.target,l=e.line.source):(a=e.line.source,l=e.line.target),n[i]){const c=St(a,l,j.fromObject(n[i]),t);return c===null?a:c}else return a}}function Gl(e,t,n){let r=null;if(e.loop||t.loop)r=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();r=Je(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else r=Rl(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)r=St(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const i=Zo(e.line),s=Zo(t.line);!isFinite(i)&&!isFinite(s)||Math.abs(i-s)<Wl?r=null:r=Ie(e.line,t.line)}return r}function xt(e,t,n,r){if(e.loop){const i=Je(t,n,e.loop.center,e.loop.radius[0]);return i?r?i[0]:i[1]:null}else return e.curve?Je(t,n,e.curve.circle.center,e.curve.circle.radius,j.fromObject(e.curve.center)):St(r?e.line.source:e.line.target,r?e.line.target:e.line.source,t,n)}function Xl(e,t,n){let r=n.origin,i=e.edge.source,s=e.edge.target,a=n.curve;const l=n.loop;l?r=n.position:t||(r=Zl(r),i=e.edge.target,s=e.edge.source,a&&(a=it(K({},a),{theta:-a.theta})));const c=W.fromLinePosition(r);return{edgeId:e.edgeId,source:i,target:s,line:c,direction:t,curve:a,loop:l}}function Zo(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function Ro(e,t,n){const{radius:r,center:i}=Z(t.loop,"Loop of edge parameter"),[s,a]=r,l=Je(e,n,i,r[0]);let[c,f]=l?l.reverse():[t.line.source,t.line.target];const u=ln(t);u||([c,f]=[f,c]);const h=c,d=f,g=j.fromObject(h).subtract(i).angleDegree();let w=(j.fromObject(d).subtract(i).angleDegree()+360-g)%360>=180;return w=u?w:!w,[h,d,`A ${s} ${a} 0 ${w?1:0} ${u?1:0} ${d.x} ${d.y}`]}function ln(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}function cn(e,t,n,r,i,s,a){const l=o.reactive({});o.watch(()=>new Set(Object.keys(e.value)),(f,u)=>{u||(u=new Set([]));for(const h of f)u.has(h)||ql(e,l,h,!1,t,i);for(const h of u)f.has(h)||(n.delete(h),r.delete(h),s==null||s(h,l[h]),delete l[h])},{immediate:!0}),o.watch(()=>[...n],(f,u)=>{const h=u?f.filter(g=>!u.includes(g)):f,d=u?u.filter(g=>!f.includes(g)):[];h.forEach(g=>{const E=l[g];E&&!E.selected&&(E.selected=!0)}),d.forEach(g=>{const E=l[g];E&&E.selected&&(E.selected=!1)})},{immediate:!0}),o.watch(()=>[...r],(f,u)=>{const h=f.filter(g=>!u.includes(g)),d=u.filter(g=>!f.includes(g));h.forEach(g=>{const E=l[g];E&&!E.hovered&&(E.hovered=!0)}),d.forEach(g=>{const E=l[g];E&&E.hovered&&(E.hovered=!1)})});const c=o.computed(()=>{const f=a?a():Object.values(l);return t.zOrder.enabled?Kl(f,t.zOrder,r,n):f});return{states:l,zOrderedList:c}}function ql(e,t,n,r,i,s){const a={id:n,selected:r,hovered:!1,selectable:o.computed(()=>e.value[n]?O.value(i.selectable,e.value[n]):o.unref(a.selectable)),zIndex:o.computed(()=>e.value[n]?O.value(i.zOrder.zIndex,e.value[n]):o.unref(a.zIndex))};t[n]=a,s(e,n,t[n])}function Kl(e,t,n,r){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);if(a!=l)return a?1:-1;const c=r.has(i.id),f=r.has(s.id);return c!=f?c?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnHover?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnSelected?e.sort((i,s)=>{const a=r.has(i.id),l=r.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):e.sort((i,s)=>i.zIndex-s.zIndex)}function Yl(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function Ql(){return{markers:o.reactive({}),referenceCount:{}}}function Jl(e){const{markers:t,referenceCount:n}=e;function r(l,c){var u;const f=(u=n[l])!=null?u:0;n[l]=f+1,f||(t[l]=c)}function i(l){var f;const c=(f=n[l])!=null?f:0;c&&(c-1===0?(delete t[l],delete n[l]):n[l]=c-1)}function s(l){l&&i(l)}function a(l,c,f,u,h){if(l.type==="none"){s(f);return}if(l.type==="custom")return s(f),l.customId;const d=ec(l,c,u),g=tc(d,h);return g===f||(s(f),r(g,d)),g}return{makeMarker:a,clearMarker:s}}function ec(e,t,n){var r;return it(K({},e),{color:(r=e.color)!=null?r:n,isSource:t})}function tc(e,t){const n=Yl(e.color),r=e.isSource?"L":"R",i=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${e.offset}_${n}_${r}_${i}`}function un(e,t,n){return{objects:e,selected:t,hovered:n}}const Vo=Symbol("states"),nc={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function oc(e,t,n,r,i,s,a,l){const c=o.reactive({}),f=ue({});o.watchEffect(()=>{const b=Object.fromEntries(Object.keys(e.objects.value).map(p=>[p,{}]));Object.entries(t.objects.value).forEach(([p,v])=>{b!=null&&b[v.source]||(b[v.source]={}),b!=null&&b[v.target]||(b[v.target]={}),b[v.source][p]=v.target,b[v.target][p]=v.source}),wt(f,b)});const{states:u,zOrderedList:h}=cn(e.objects,r.node,e.selected,e.hovered,(b,p,v)=>{sc(b,p,v,r.node,f,i,s)},(b,p)=>{const v=i.nodes;delete v[b]}),d=Ol(),g=Bl(e.objects,t.objects,r),E=o.ref([]),{states:k,zOrderedList:w}=cn(t.objects,r.edge,t.selected,t.hovered,(b,p,v)=>{lc(b,p,v,r.edge,a,u,g,i,l,d)},(b,p)=>{var v;(v=p.stopWatchHandle)==null||v.call(p)},()=>E.value);o.watchEffect(()=>{E.value=cc(g.edgeGroups,k)}),o.watch(g.edgeGroups,b=>fc(c,g,r),{immediate:!0});const{states:m,zOrderedList:y}=cn(n.objects,r.path,n.selected,n.hovered,(b,p,v)=>{const P=v;P.clickable=o.computed(()=>b.value[p]?O.value(r.path.clickable,b.value[p]):!1),P.hoverable=o.computed(()=>b.value[p]?O.value(r.path.hoverable,b.value[p]):!1),P.path=b.value[p],P.edges=Wo(P.path,t),P.directions=No(P.edges),P.stopWatchHandle=o.watch(()=>b.value[p].edges,()=>{P.path=b.value[p],P.edges=Wo(P.path,t),P.directions=No(P.edges)})},(b,p)=>{var v;(v=p.stopWatchHandle)==null||v.call(p)}),S={nodeStates:u,edgeStates:k,edgeGroupStates:g,summarizedEdgeStates:c,pathStates:m,layouts:i,nodeZOrderedList:h,edgeZOrderedList:w,pathZOrderedList:y};return o.provide(Vo,S),S}function rc(e){return e.summarized}function le(){return Z(o.inject(Vo),"states")}function ic(e,t,n,r){return n&&r.hover?O.values(r.hover,e):Ho(e,t,r)}function Ho(e,t,n){return t&&n.selected?O.values(n.selected,e):O.values(n.normal,e)}function sc(e,t,n,r,i,s,a){var l,c;!s.nodes[t]&&((l=a.nodes)!=null&&l[t])&&(s.nodes[t]=K({},(c=a.nodes)==null?void 0:c[t])),n.shape=o.computed(()=>e.value[t]?ic(e.value[t],n.selected,n.hovered,r):o.unref(n.shape)),n.staticShape=o.computed(()=>e.value[t]?Ho(e.value[t],n.selected,r):o.unref(n.staticShape)),n.label=o.computed(()=>e.value[t]?O.values(r.label,e.value[t]):o.unref(n.label)),n.labelText=o.computed(()=>{var f,u;return r.label.text instanceof Function?o.unref(n.label).text:e.value[t]?(u=(f=e.value[t])==null?void 0:f[o.unref(n.label).text])!=null?u:"":o.unref(n.labelText)}),n.draggable=o.computed(()=>e.value[t]?O.value(r.draggable,e.value[t]):o.unref(n.draggable)),n.oppositeNodeIds=o.toRef(i,t),n.oppositeNodes=o.computed(()=>Object.entries(n.oppositeNodeIds).reduce((f,u)=>{const[h,d]=u,g=s.nodes[d];return g&&(f[h]={nodeId:d,pos:K({},g)}),f},{}))}function ac(e,t,n,r){return t?O.values(r.selected,e):n&&r.hover?O.values(r.hover,e):O.values(r.normal,e)}function Fo(e){return e.type==="none"?nc:e}function lc(e,t,n,r,i,s,a,l,c,f){const{makeMarker:u,clearMarker:h}=Jl(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=o.computed(()=>e.value[t]?O.values(r.label,e.value[t]):o.unref(n.label));const d=o.computed(()=>{const m=e.value[t],y=ac(m,n.selected,n.hovered,r);isNaN(+y.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,y.width),y.width=1),(y.color===void 0||y.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,y.color),y.color="#000000");let S=O.value(r.normal.width,m);isNaN(+S)&&(S=1);const b=Fo(O.values(r.marker.source,[m,y])),p=Fo(O.values(r.marker.target,[m,y]));return{stroke:y,normalWidth:S,source:b,target:p}});n.line=d;const g=o.toRef(a.edgeLayoutPoints,t),E=o.toRef(a.summarizedEdges,t),k=o.watchEffect(()=>{var N,R,ae,J,he,$e,Ae;const m=e.value[t];if(!m)return;const y=(N=s[m.source])==null?void 0:N.staticShape,S=(R=s[m.target])==null?void 0:R.staticShape;if(!y||!S)return;const b=(ae=l.nodes[m==null?void 0:m.source])!=null?ae:{x:0,y:0},p=(J=l.nodes[m==null?void 0:m.target])!=null?J:{x:0,y:0},v=zl(g.value,(he=E.value)!=null?he:!1,b,p,c.value,r.keepOrder),[P,M]=Vl(b,p,y,S),_=c.value;n.labelPosition=on(v,P*_,M*_);let C=0,T=0;const B=d.value;if(B.source.type!=="none"){const ne=B.source;C=ne.margin+ne.width,ne.units==="strokeWidth"&&(C*=B.normalWidth)}if(B.target.type!=="none"){const ne=B.target;T=ne.margin+ne.width,ne.units==="strokeWidth"&&(T*=B.normalWidth)}r.margin&&(C+=r.margin,T+=r.margin);const L=!!r.margin||B.source.type!=="none"||B.target.type!=="none";if(m.source===m.target){n.origin=kt(b,p);const ne=O.values(r.selfLoop,m),[Ve,He]=dc(b,y,ne,L,C,T,(Ae=($e=g.value)==null?void 0:$e.pointInGroup)!=null?Ae:0,_);n.position=Ve,n.loop=He,n.curve=void 0;return}else n.loop=void 0;if(L&&(C+=P,T+=M),r.type==="straight"||E.value)n.origin=v,n.curve=void 0,C===0&&T===0?n.position=n.origin:n.position=on(n.origin,C*_,T*_);else{n.origin=kt(b,p);const ne=g.value?g.value.groupWidth/2-g.value.pointInGroup:0,[Ve,He]=uc(n.origin,v,ne,C*_,T*_);n.position=Ve,n.curve=He}}),w=o.watchEffect(()=>{e.value[t]&&(n.sourceMarkerId=u(d.value.source,!0,n.sourceMarkerId,d.value.stroke.color,f),n.targetMarkerId=u(d.value.target,!1,n.targetMarkerId,d.value.stroke.color,f))});n.stopWatchHandle=()=>{k(),w(),h(n.sourceMarkerId),h(n.targetMarkerId)}}function cc(e,t){return Object.entries(e).map(([n,r])=>{var i;return r.summarize?{id:(i=Object.keys(r.edges)[0])!=null?i:n,summarized:!0,key:n,group:r,zIndex:Object.keys(r.edges).map(s=>{var a,l;return(l=(a=t[s])==null?void 0:a.zIndex)!=null?l:0}).reduce((s,a)=>Math.max(s,a))}:Object.entries(r.edges).map(([s,a])=>{var l,c;return{id:s,summarized:!1,key:s,edge:a,zIndex:(c=(l=t[s])==null?void 0:l.zIndex)!=null?c:0}})}).flat()}function uc(e,t,n,r,i){const s=W.fromLinePosition(e),a=W.fromLinePosition(t),l=jl(t),[c,f]=Hl(s.source,s.target,l);let u,h;if(f===0)return[e,h];if(n===0)return r===0&&i===0?u=e:u=on(e,r,i),[u,h];const d=W.fromVectors(c,l),g=De(W.fromVectors(c,s.source),d);if(r===0&&i===0)u=e;else{let m=r/f,y=i/f;g>0&&(m*=-1,y*=-1),u=kt(ke(s.source,c,m),ke(s.target,c,-y));let S=De(W.fromVectors(c,s.source),W.fromVectors(c,s.target)),b=De(W.fromPositions(c,u.p1),W.fromPositions(c,u.p2));if(g*S<0&&(S=sn(S),g*b<0&&(b=sn(b))),S*b<0){const p=l.clone().add(a.v.normalize().multiplyScalar(.5));return u=kt(l,p),[u,h]}}const[E,k]=Nl(u),w=an(E,c,k,g).map(m=>m.toObject());return h={center:l,theta:g,circle:{center:c,radius:f},control:w},[u,h]}function dc(e,t,n,r,i,s,a,l){const c=l,f=(n.radius+a/2)*c,u=n.offset*c+f,h=(n.angle-90)*(Math.PI/180),d=j.fromObject({x:e.x+u*Math.cos(h),y:e.y+u*Math.sin(h)}),g=n.isClockwise;let E,k;if(r){const b=Je(d,f,j.fromObject(e),Ze(t)*c);if(b){[E,k]=b;let p=1;if(g||([E,k]=[k,E],p=-1),i!==0||s!==0){const v=i*c/f*p,P=s*c/f*p;E=ke(E,d,v),k=ke(k,d,-P)}}}if(E===void 0||k===void 0){const b=j.fromObject(e).subtract(d).normalize().multiplyScalar(f);let p=1*(Math.PI/180);g||(p*=-1),E=d.clone().add(Et(b,p)),k=d.clone().add(Et(b,-p))}const w=j.fromObject(E).subtract(d).angleDegree(),S=(j.fromObject(k).subtract(d).angleDegree()+360-w)%360>=180;return[{p1:E,p2:k},{center:d,radius:[f,f],isLargeArc:g?S:!S,isClockwise:g}]}function fc(e,t,n){const r=t.edgeGroups;Object.entries(r).filter(([i,s])=>s.summarize&&!(i in e)).forEach(([i,s])=>{const a={stroke:void 0};a.stroke=o.computed(()=>O.values(n.edge.summarized.stroke,s.edges)),e[i]=a}),Object.keys(e).forEach(i=>{var s;(s=t.edgeGroups[i])!=null&&s.summarize||delete e[i]})}function Wo(e,t){return e.edges.map(n=>({edgeId:n,edge:t.objects.value[n]})).filter(n=>n.edge)}class et{static valueOf(t){return Array.from(t.values())}}const hc=3,pc=6,Uo=500;function Mt(e){return e==="touch"?pc:hc}function dn(e,t,n,r){let i=e.get(t);if(i)i.id!==n&&(i=void 0);else{const l=Array.from(e.entries()).find(([c,f])=>f.id===n);if(l){const[c,f]=l;e.delete(c),i=f}}let s,a;return[i,s,a]=Go(i,r,n),e.set(t,i),[s,a]}function Go(e,t,n){const r=Date.now();e&&r-e.lastTime<=Uo?(e.count++,e.lastTime=r):e={count:1,lastTime:r,id:n};const i={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let s,a;return t instanceof PointerEvent?(Object.assign(i,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),s=new PointerEvent("click",i),e.count===2&&(a=new PointerEvent("dblclick",i))):(s=new MouseEvent("click",i),e.count===2&&(a=new MouseEvent("dblclick",i))),[e,s,a]}function fn(e){const t=Date.now();Array.from(e.entries()).filter(([n,r])=>t-r.lastTime>Uo).map(([n,r])=>e.delete(n))}function gc(e,t,n,r,i,s,a){const l={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:g,pointerup:k,pointercancel:E};function f(b){const p=l.follow.followedPointerId===b.pointerId,v=i.has(b.nodeId),P=!(b.pointerId in l.pointers);if(p&&P||p&&!v){const M=et.valueOf(l.pointers).find(_=>i.has(_.nodeId));if(!M){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=M,l.follow.followedPointerId=b.pointerId}else{const M=l.pointers.get(l.follow.followedPointerId);if(!M){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}b=M}if(p||v){const M=et.valueOf(l.pointers).map(_=>_.nodeId);l.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(_=>!M.includes(_)).filter(_=>{var C;return(C=e[_])==null?void 0:C.draggable}).map(_=>[_,hn(t.nodes,_)])),b.dragBasePosition=K({},b.latestPosition),b.nodeBasePosition=hn(t.nodes,b.nodeId)}}o.watch(i,b=>{const p=l.pointers.get(l.follow.followedPointerId);p&&f(p),b.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":b.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),o.watch(n.selectionMode,b=>{b!=="node"&&i.clear()});function u(b,p){const v=b.dragBasePosition.x-p.pageX,P=b.dragBasePosition.y-p.pageY,M=l.follow.followedPointerId==b.pointerId?K({[b.nodeId]:b.nodeBasePosition},l.follow.nodeBasePositions):{[b.nodeId]:b.nodeBasePosition},_=s.value;return Object.fromEntries(Object.entries(M).map(([C,T])=>[C,{x:T.x-v/_,y:T.y-P/_}]))}function h(b,p){var P,M;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const v=(M=(P=e[b])==null?void 0:P.selectable)!=null?M:!1;if(v){const _=et.valueOf(l.pointers).filter(C=>i.has(C.nodeId)).length>0;p.shiftKey||_?i.has(b)?i.delete(b):typeof v=="number"&&i.size>=v||i.add(b):i.has(b)||(i.clear(),i.add(b))}a.emit("node:click",{node:b,event:p})}function d(b,p){p.isTrusted||a.emit("node:dblclick",{node:b,event:p})}function g(b){var M;b.stopPropagation();const p=l.pointers.get(b.pointerId);if(!p)return;p.latestPosition={x:b.pageX,y:b.pageY},p.moveCounter++;const v=Mt(b.pointerType);if(p.moveCounter<=v||!((M=e[p.nodeId])!=null&&M.draggable))return;if(p.moveCounter===v+1){const _=u(p,{pointerId:p.pointerId,pageX:p.dragBasePosition.x,pageY:p.dragBasePosition.y});a.emit("node:dragstart",_)}const P=u(p,b);a.emit("node:pointermove",P)}function E(b){b.stopPropagation();let p=l.pointers.get(b.pointerId);if(p){for(p of l.pointers.values()){const v=p.nodeId,P=Mt(b.pointerType);if(p.moveCounter>P){const _=u(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});a.emit("node:dragend",_)}a.emit("node:pointerup",{node:v,event:b})}l.pointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([v,P])=>{document.removeEventListener(v,P)}),n.viewMode.value="default"}}function k(b){var _,C,T;b.stopPropagation();const p=l.pointers.get(b.pointerId);if(!p)return;l.pointers.delete(b.pointerId);const v=p.nodeId,P=Mt(b.pointerType),M=p.moveCounter>P;if(M){if((_=e[p.nodeId])!=null&&_.draggable){const B=u(p,b);a.emit("node:dragend",B),a.emit("node:pointerup",{node:v,event:b})}}else a.emit("node:pointerup",{node:v,event:b});if(!M){const[B,L]=dn(l.clicks,p.pointerId,v,b);(C=p.eventTarget)==null||C.dispatchEvent(B),L&&((T=p.eventTarget)==null||T.dispatchEvent(L))}l.pointers.size===0?(l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([B,L])=>{document.removeEventListener(B,L)}),fn(l.clicks),n.viewMode.value="default"):f(p),r.clear(),l.hoveredNodesPre.forEach(r.add,r)}function w(b,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;l.pointers.size==0&&(n.viewMode.value="node",ee(c).forEach(([P,M])=>{document.addEventListener(P,M)}));const v={pointerId:p.pointerId,nodeId:b,moveCounter:0,nodeBasePosition:hn(t.nodes,b),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};l.pointers.set(p.pointerId,v),i.has(b)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=p.pointerId,f(v)):delete l.follow.nodeBasePositions[v.nodeId]),a.emit("node:pointerdown",{node:b,event:p})}function m(b,p){l.hoveredNodesPre.add(b),!(l.pointers.size>0)&&(r.add(b),a.emit("node:pointerover",{node:b,event:p}))}function y(b,p){l.hoveredNodesPre.delete(b),!(l.pointers.size>0)&&(r.delete(b),a.emit("node:pointerout",{node:b,event:p}))}function S(b,p){p.stopPropagation(),a.emit("node:contextmenu",{node:b,event:p})}return{handleNodePointerDownEvent:w,handleNodePointerOverEvent:m,handleNodePointerOutEvent:y,handleNodeClickEvent:h,handleNodeDoubleClickEvent:d,handleNodeContextMenu:S}}function hn(e,t){var r;const n=(r=e[t])!=null?r:{x:0,y:0};return K({},n)}function mc(e,t,n,r,i){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:c,pointercancel:f};o.watch(r,p=>{p.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":p.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,p=>{p!=="edge"&&r.clear()});function l(p,v){if(v.button==2||(v.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([M,_])=>{document.addEventListener(M,_)}),s.pointerPeekCount=0),s.pointerPeekCount++;const P={pointerId:v.pointerId,id:p,eventTarget:v.currentTarget};s.pointers.set(v.pointerId,P),i.emit("edge:pointerdown",se(p,v))}function c(p){var C,T;p.stopPropagation();const v=s.pointers.get(p.pointerId);if(!v)return;s.pointers.delete(p.pointerId);const P=v.id;i.emit("edge:pointerup",se(P,p));const[M,_]=dn(s.clicks,v.pointerId,P instanceof Array?P.join(","):P,p);(C=v.eventTarget)==null||C.dispatchEvent(M),_&&((T=v.eventTarget)==null||T.dispatchEvent(_)),s.pointers.size===0&&(s.pointerPeekCount=0,ee(a).forEach(([B,L])=>{document.removeEventListener(B,L)}),fn(s.clicks),t.viewMode.value="default")}function f(p){if(p.stopPropagation(),!!s.pointers.get(p.pointerId)){for(const P of s.pointers.values()){const M=P.id;i.emit("edge:pointerup",se(M,p))}s.pointers.clear(),s.pointerPeekCount=0,ee(a).forEach(([P,M])=>{document.removeEventListener(P,M)}),i.emit("view:mode","default")}}function u(p,v){var _;if(v.isTrusted||v.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const P=p instanceof Array?p:[p],M=et.valueOf(s.pointers).filter(C=>(C.id instanceof Array?C.id:[C.id]).every(B=>r.has(B))).length>0;if(p instanceof Array)P.find(T=>{var B;return(B=e[T])==null?void 0:B.selectable})&&(v.shiftKey||M?P.some(T=>r.has(T))?P.forEach(T=>r.delete(T)):P.forEach(T=>{var L;const B=(L=e[T])==null?void 0:L.selectable;typeof B=="number"&&r.size>=B||r.add(T)}):(r.clear(),P.forEach(T=>r.add(T))));else{const C=(_=e[p])==null?void 0:_.selectable;C&&(v.shiftKey||M?r.has(p)?r.delete(p):typeof C=="number"&&r.size>=C||r.add(p):r.has(p)||(r.clear(),r.add(p)))}i.emit("edge:click",se(p,v))}function h(p,v){v.isTrusted||i.emit("edge:dblclick",se(p,v))}function d(p,v){n.add(p),i.emit("edge:pointerover",se(p,v))}function g(p,v){n.delete(p),i.emit("edge:pointerout",se(p,v))}function E(p,v){v.stopPropagation(),i.emit("edge:contextmenu",se(p,v))}function k(p,v){if(v.button==2||(v.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([M,_])=>{document.addEventListener(M,_)}),s.pointerPeekCount=0),s.pointerPeekCount++;const P={pointerId:v.pointerId,id:p,eventTarget:v.currentTarget};s.pointers.set(v.pointerId,P),i.emit("edge:pointerdown",se(p,v))}function w(p,v){p.forEach(P=>n.add(P)),i.emit("edge:pointerover",se(p,v))}function m(p,v){p.forEach(P=>n.delete(P)),i.emit("edge:pointerout",se(p,v))}function y(p,v){u(p,v)}function S(p,v){h(p,v)}function b(p,v){v.stopPropagation(),i.emit("edge:contextmenu",se(p,v))}return{handleEdgePointerDownEvent:l,handleEdgePointerOverEvent:d,handleEdgePointerOutEvent:g,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:h,handleEdgeContextMenu:E,handleEdgesPointerDownEvent:k,handleEdgesPointerOverEvent:w,handleEdgesPointerOutEvent:m,handleEdgesClickEvent:y,handleEdgesDoubleClickEvent:S,handleEdgesContextMenu:b}}function se(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function vc(e,t,n,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},s={pointermove:l,pointerup:c,pointercancel:c};function a(g){i.moveCounter=0,i.pointerCounter===0&&ee(s).forEach(([E,k])=>{document.addEventListener(E,k,{passive:!0})}),i.pointerCounter++}function l(g){i.moveCounter++}function c(g){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,ee(s).forEach(([k,w])=>{document.removeEventListener(k,w)});const E=Mt(g.pointerType);if(i.moveCounter<=E){if(g.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[k,w,m]=Go(i.clickState,g,"view");i.clickState=k,e.value.dispatchEvent(w),m&&e.value.dispatchEvent(m)}}}function f(g){g.isTrusted||(g.stopPropagation(),r.emit("view:click",{event:g}))}function u(g){g.isTrusted||(g.stopPropagation(),r.emit("view:dblclick",{event:g}))}function h(g){r.emit("view:contextmenu",{event:g}),i.pointerCounter>0&&(i.pointerCounter=0,ee(s).forEach(([E,k])=>{var w;(w=e.value)==null||w.removeEventListener(E,k)}))}const d=g=>{g.preventDefault()};o.onMounted(()=>{const g=e.value;g&&(g.addEventListener("pointerdown",a,{passive:!0}),g.addEventListener("click",f,{passive:!1}),g.addEventListener("dblclick",u,{passive:!1}),g.addEventListener("contextmenu",h,{passive:!1}),n.value&&g.addEventListener("wheel",d,{passive:!1}))}),o.onUnmounted(()=>{const g=e.value;g&&(g.removeEventListener("pointerdown",a),g.removeEventListener("click",f),g.removeEventListener("dblclick",u),g.removeEventListener("contextmenu",h),n.value&&g.removeEventListener("wheel",d))}),o.watch(n,(g,E)=>{const k=e.value;!k||g===E||(g?k.addEventListener("wheel",d,{passive:!1}):k.removeEventListener("wheel",d))})}function bc(e,t,n,r,i,s){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function l(m,y){var S,b;return i.value?{path:(b=(S=e[m])==null?void 0:S.path)!=null?b:m,event:y}:{path:m,event:y}}const c={pointerup:u,pointercancel:h};o.watch(r,m=>{m.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":m.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,m=>{m!=="path"&&r.clear()});function f(m,y){var b;if(!((b=e[m])!=null&&b.clickable)||y.button==2||(y.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="path",ee(c).forEach(([p,v])=>{document.addEventListener(p,v)}),a.pointerPeekCount=0),a.pointerPeekCount++;const S={pointerId:y.pointerId,id:m,eventTarget:y.currentTarget};a.pointers.set(y.pointerId,S),s.emit("path:pointerdown",l(m,y))}function u(m){var v,P;const y=a.pointers.get(m.pointerId);if(!y)return;m.stopPropagation(),a.pointers.delete(m.pointerId);const S=y.id;s.emit("path:pointerup",l(S,m));const[b,p]=dn(a.clicks,y.pointerId,S,m);(v=y.eventTarget)==null||v.dispatchEvent(b),p&&((P=y.eventTarget)==null||P.dispatchEvent(p)),a.pointers.size===0&&(a.pointerPeekCount=0,ee(c).forEach(([M,_])=>{document.removeEventListener(M,_)}),fn(a.clicks),t.viewMode.value="default")}function h(m){if(a.pointers.get(m.pointerId)){m.stopPropagation();for(const S of a.pointers.values()){const b=S.id;s.emit("path:pointerup",l(b,m))}a.pointers.clear(),a.pointerPeekCount=0,ee(c).forEach(([S,b])=>{document.removeEventListener(S,b)}),s.emit("view:mode","default")}}function d(m,y){var S;(S=e[m])!=null&&S.hoverable&&(n.add(m),s.emit("path:pointerover",l(m,y)))}function g(m,y){var S;(S=e[m])!=null&&S.hoverable&&(n.delete(m),s.emit("path:pointerout",l(m,y)))}function E(m,y){var b,p,v;if(y.isTrusted||!((b=e[m])!=null&&b.clickable)||y.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const S=(v=(p=e[m])==null?void 0:p.selectable)!=null?v:!1;if(S){const P=et.valueOf(a.pointers).filter(M=>r.has(M.id)).length>0;y.shiftKey||P?r.has(m)?r.delete(m):typeof S=="number"&&r.size>=S||r.add(m):r.has(m)||(r.clear(),r.add(m))}s.emit("path:click",l(m,y))}function k(m,y){var S;y.isTrusted||(S=e[m])!=null&&S.clickable&&s.emit("path:dblclick",l(m,y))}function w(m,y){var S;(S=e[m])!=null&&S.clickable&&(y.stopPropagation(),s.emit("path:contextmenu",l(m,y)))}return{handlePathPointerDownEvent:f,handlePathPointerOverEvent:d,handlePathPointerOutEvent:g,handlePathClickEvent:E,handlePathDoubleClickEvent:k,handlePathContextMenu:w}}function yc(e){return ce(this,null,function*(){const n=yield(yield fetch(e)).blob();return new Promise((r,i)=>{try{const s=new FileReader;s.onload=function(){r(this.result)},s.readAsDataURL(n)}catch(s){i(s)}})})}function pn(e,t,n){var s;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((s=t.getCTM())==null?void 0:s.inverse());return{x:i.x,y:i.y}}function wc(e,t,n){const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(t.getCTM());return{x:i.x,y:i.y}}function Xo(e,t,n){var f;const r=e.cloneNode(!0),i=t.getBBox(),s=1/n,a={x:Math.floor((i.x-10)*s),y:Math.floor((i.y-10)*s),width:Math.ceil((i.width+20)*s),height:Math.ceil((i.height+20)*s)};r.setAttribute("width",a.width.toString()),r.setAttribute("height",a.height.toString());const l=r.querySelector(".v-ng-viewport");l.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${s})`),l.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),r.removeAttribute("style");const c=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;c.nextNode();){const u=c.referenceNode;(f=u.parentNode)==null||f.removeChild(u)}return r}function Ec(e){return ce(this,null,function*(){let t=!1,n=e.getAttribute("href");if(n||(t=!0,n=e.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const r=yield yc(n);e.setAttribute(t?"xlink:href":"href",r)}catch(r){console.warn("Image download failed.",n);return}})}function kc(i,s,a){return ce(this,arguments,function*(e,t,n,r={}){const l=Xo(e,t,n);if(r.embedImages){const f=Array.from(l.querySelectorAll("image")).map(u=>Ec(u));yield Promise.all(f)}return l})}function Sc(e,t,n,r,i,s){const a=o.computed(()=>!!s.node.selectable&&s.view.boxSelectionEnabled),l=o.computed(()=>t.viewMode.value==="box-selection"),c=o.ref(),f=o.ref(),u={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},h=dl(()=>{Pc(Z(e.value,"container"),Z(c.value,"viewport"),f,n.nodes,r,i,u.selectedNodesAtSelectStarted,u.selectionType)},50,{maxWait:100}),d=new xc(e,E,k,w,g,m);function g(v){if(u.options.stopTrigger!=="click"||u.pointers.size>0)return;const P={x:v.offsetX,y:v.offsetY};u.startPoint&&j.fromObject(u.startPoint).distance(P)>10||p()}function E(v){v.stopPropagation();const P={x:v.offsetX,y:v.offsetY};u.pointers.size===0&&(u.startPoint=P,d.activate(),u.selectedNodesAtSelectStarted.clear(),i.forEach(M=>u.selectedNodesAtSelectStarted.add(M)),u.options.selectionTypeWithShiftKey==="same"?u.selectionType=u.options.selectionType:u.selectionType=v.shiftKey?u.options.selectionTypeWithShiftKey:u.options.selectionType),u.pointers.has(v.pointerId)||u.pointers.add(v.pointerId),u.points.set(v.pointerId,P),y()}function k(v){if(u.pointers.delete(v.pointerId),u.pointers.size===1){const P=Z(e.value).getBoundingClientRect(),M={x:v.x-P.x,y:v.y-P.y};u.startPoint=M}else u.pointers.size===0&&(d.deactivate(),u.options.stopTrigger==="pointerup"&&p(),u.selectedNodesAtSelectStarted.clear());y()}function w(v){const P=Z(e.value).getBoundingClientRect(),M={x:v.x-P.x,y:v.y-P.y};u.points.set(v.pointerId,M),y(),h()}function m(v){v.key==="Escape"&&u.options.stopTrigger!=="manual"&&(v.stopPropagation(),p())}function y(){let v,P;const M=Array.from(u.pointers);if(M.length>=2){const _=M[0],C=M[M.length-1];v=u.points.get(_),P=u.points.get(C)}else if(u.startPoint&&M.length===1){const _=M[0];v=u.startPoint,P=u.points.get(_)}else v=void 0,P=void 0;v&&P?(f.value={pos:{x:Math.min(v.x,P.x),y:Math.min(v.y,P.y)},size:{width:Math.abs(P.x-v.x),height:Math.abs(P.y-v.y)}},f.value.size.width===0&&(f.value.size.width=1),f.value.size.height===0&&(f.value.size.height=1)):f.value&&(f.value=void 0)}const S=new Mc(e,v=>{a.value&&s.view.selection.detector(v)&&(b({stop:"manual",type:"append",withShiftKey:"invert"}),S.activate())},v=>{a.value&&s.view.selection.detector(v)&&(u.pointers.size===0?p():u.options.stopTrigger="pointerup",S.deactivate())});o.watch(a,v=>{v?S.register():S.unregister()}),o.onMounted(()=>{var v;c.value=(v=e.value)==null?void 0:v.querySelector(".v-ng-viewport"),a.value&&S.register()}),o.onUnmounted(()=>{p(),a.value&&S.unregister()});function b(v={}){var P,M,_;u.options={stopTrigger:(P=v.stop)!=null?P:"pointerup",selectionType:(M=v.type)!=null?M:"append",selectionTypeWithShiftKey:(_=v.withShiftKey)!=null?_:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",u.pointers.clear(),d.register())}function p(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",d.unregister())}return{isBoxSelectionMode:l,selectionBox:f,startBoxSelection:b,stopBoxSelection:p}}function Pc(e,t,n,r,i,s,a,l){if(!n.value)return;const c=n.value,f=pn(e,t,c.pos),u=pn(e,t,{x:c.pos.x+c.size.width,y:c.pos.y+c.size.height}),h=new Set(Object.entries(r).filter(([d,g])=>f.x<=g.x&&g.x<=u.x&&f.y<=g.y&&g.y<=u.y).map(([d,g])=>d));if(l==="append")s.forEach(d=>{h.has(d)||s.delete(d)}),h.forEach(d=>{var E,k;const g=(k=(E=i[d])==null?void 0:E.selectable)!=null?k:!1;(g===!0||typeof g=="number"&&s.size<g)&&s.add(d)});else{const d=new Set(a);d.forEach(g=>{h.has(g)&&d.delete(g)}),h.forEach(g=>{var E,k;if(!a.has(g)){const w=(k=(E=i[g])==null?void 0:E.selectable)!=null?k:!1;(w===!0||typeof w=="number"&&d.size<w)&&d.add(g)}}),s.clear(),d.forEach(g=>s.add(g))}}class xc{constructor(t,n,r,i,s,a){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=r,this._handlePointerMoveEvent=i,this._handleClickEvent=s,this._handleKeyDownEvent=a,this._ignoreEvent=l=>l.stopPropagation()}register(){const t={capture:!0,passive:!1},n=Z(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Mc{constructor(t,n,r){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=r,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),Z(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const qo=Symbol("mouseEventHandlers");function Cc(e,t,n,r,i,s,a,l,c,f,u,h,d,g,E,k){const w={selectionMode:o.ref("container"),viewMode:o.ref("default")};a.size>0?w.selectionMode.value="node":l.size>0?w.selectionMode.value="edge":c.size>0&&(w.selectionMode.value="path"),o.watch(w.viewMode,y=>{k.emit("view:mode",y)}),vc(e,w,g,k);const m=K(K(K(K({selectedNodes:a,hoveredNodes:f,selectedEdges:l,hoveredEdges:u,selectedPaths:c,hoveredPaths:h},gc(r,t,w,f,a,n,k)),mc(i,w,u,l,k)),bc(s,w,h,c,d,k)),Sc(e,w,t,r,a,E));return o.provide(qo,m),m}function tt(){return Z(o.inject(qo),"mouseEventHandlers")}function Tc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const Ko=Symbol("emitter");function Oc(){const e=Tc();return o.provide(Ko,e),e}function _c(){return Z(o.inject(Ko),"event emitter")}var Ct=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Bc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ct!="undefined")return Ct;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var r=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-r.left,e.clientY=e.touches[n].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,s,a,l=null,c=0;n||(n={});var f=function(){c=n.leading===!1?0:r.now(),l=null,a=e.apply(i,s),l||(i=s=null)};return function(){var u=r.now();!c&&n.leading===!1&&(c=u);var h=t-(u-c);return i=this,s=arguments,h<=0||h>t?(clearTimeout(l),l=null,c=u,a=e.apply(i,s),l||(i=s=null)):!l&&n.trailing!==!1&&(l=setTimeout(f,h)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Yo(33):Yo(t)},calculateDistance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}};function Yo(e){return function(t){window.setTimeout(t,e)}}var zc=Tt,Ic=function(){var e="",t,n,r,i=[],s={passive:!0},a={passive:!1};zc.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function l(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function c(k,w){var m=function(y){!y&&(y=window.event);var S={originalEvent:y,target:y.target||y.srcElement,type:"wheel",deltaMode:y.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){y.preventDefault?y.preventDefault():y.returnValue=!1}};return l()=="mousewheel"?(S.deltaY=-.025*y.wheelDelta,y.wheelDeltaX&&(S.deltaX=-.025*y.wheelDeltaX)):S.deltaY=y.detail,w(S)};return i.push({element:k,fn:m}),m}function f(k){for(var w=0;w<i.length;w++)if(i[w].element===k)return i[w].fn;return function(){}}function u(k){for(var w=0;w<i.length;w++)if(i[w].element===k)return i.splice(w,1)}function h(k,w,m,y){var S;l()==="wheel"?S=m:S=c(k,m),k[t](e+w,S,y?s:a)}function d(k,w,m,y){var S;l()==="wheel"?S=m:S=f(k),k[n](e+w,S,y?s:a),u(k)}function g(k,w,m){h(k,l(),w,m),l()=="DOMMouseScroll"&&h(k,"MozMousePixelScroll",w,m)}function E(k,w,m){d(k,l(),w,m),l()=="DOMMouseScroll"&&d(k,"MozMousePixelScroll",w,m)}return{on:g,off:E}}(),Ot=Tt,Qo="unknown";typeof document!="undefined"&&document.documentMode&&(Qo="ie");var gn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Ot.isElement(t)?n=t:n=e.querySelector(t),!n){var r=Array.prototype.slice.call(e.childNodes||e.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var s=e.childNodes||e.children;if(s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&n.appendChild(s[s.length-a]);e.appendChild(n)}var l=[];return n.getAttribute("class")&&(l=n.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),n.setAttribute("class",l.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Ot.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},Ct?Ct.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var r=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Qo==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Ot.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var r=t.createSVGPoint();return Ot.touchNormalize(e,t,n),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}},oe=gn,$c={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(oe.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(oe.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(r)}var i=document.createElementNS(oe.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomReset:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r);var i=document.createElementNS(oe.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Ac=gn,Se=Tt,X=function(e,t){this.init(e,t)};X.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Se.proxy(this.updateCTM,this),this.requestAnimationFrame=Se.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},X.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},X.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},X.prototype.getViewBox=function(){return Se.extend({},this.viewBox)},X.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},X.prototype.getOriginalState=function(){return Se.extend({},this.originalState)},X.prototype.getState=function(){return Se.extend({},this.activeState)},X.prototype.getZoom=function(){return this.activeState.zoom},X.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},X.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},X.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},X.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},X.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,s=!1;r===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=s=!0):Se.isObject(r)&&(r.x===!1?(e.e=this.getPan().x,i=!0):Se.isNumber(r.x)&&(e.e=r.x),r.y===!1?(e.f=this.getPan().y,s=!0):Se.isNumber(r.y)&&(e.f=r.y)),i&&s||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},X.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},X.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},X.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},X.prototype.pendingUpdate=!1,X.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},X.prototype.updateCTM=function(){var e=this.getCTM();Ac.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Lc=function(e,t){return new X(e,t)},Jo=Ic,mn=$c,te=Tt,Y=gn,Nc=Lc,V=function(e,t){this.init(e,t)},jc={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},er={passive:!0},tr={passive:!1};V.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Y.setupSvgAttributes(this.svg),this.options=te.extend(te.extend({},jc),t),this.state="none";var r=Y.getBoundingClientRectNormalized(e);this.width=r.width,this.height=r.height,this.viewport=Nc(Y.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,a)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,a)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&mn.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},V.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(s){if(s.pointerType!=="touch"){var a=e.handleMouseDown(s,t);return t=s,a}},touchstart:function(s){var a=e.handleTouchStart(s,t);return t=s,a},pointerup:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchend:function(s){return e.handleTouchEnd(s)},pointermove:function(s){if(s.pointerType!=="touch")return e.handleMouseMove(s)},touchmove:function(s){return e.handleTouchMove(s)},pointerleave:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},pointercancel:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchleave:function(s){return e.handleTouchEnd(s)},touchcancel:function(s){return e.handleTouchEnd(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?tr:er);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},V.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Jo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},V.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Jo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},V.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),s=Y.getEventPoint(e,this.svg).matrixTransform(i),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,s)}},V.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),s=t.matrixTransform(i.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(e).translate(-s.x,-s.y),l=i.multiply(a);l.a!==i.a&&this.viewport.setCTM(l)},V.prototype.zoom=function(e,t){this.zoomAtPoint(e,Y.getSvgCenterPoint(this.svg,this.width,this.height),t)},V.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},V.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),te.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=Y.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)},V.prototype.getZoom=function(){return this.viewport.getZoom()},V.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},V.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},V.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},V.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},V.prototype.reset=function(){this.resetZoom(),this.resetPan()},V.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=Y.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)},V.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),te.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&te.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},V.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},V.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")},V.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=Y.getTouchPoint(e,this.svg,0),r=Y.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(n,r),n.x=(n.x+r.x)/2,n.y=(n.y+r.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},V.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1),r=this.svg.createSVGPoint();if(r.x=(t.x+n.x)/2,r.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var i=r.matrixTransform(this.firstEventCTM.inverse()),s=this.firstEventCTM.translate(i.x-this.stateOrigin.x,i.y-this.stateOrigin.y);this.viewport.setCTM(s)}if(this.options.zoomEnabled){var a=te.calculateDistance(t,n),l=a/this.firstDistance,c=this.svg.getScreenCTM().inverse(),f=r.matrixTransform(c);this.zoomAtPoint(this.firstZoomLevel*l,f,!0)}}},V.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=Y.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=Y.getTouchPoint(e,this.svg,0),n=Y.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},V.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},V.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},V.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},V.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},V.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},V.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},V.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},V.prototype.resize=function(){var e=Y.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},V.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?tr:er);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),Pe=Pe.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},V.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:te.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,mn.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,mn.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:te.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var Pe=[],Dc=function(e,t){var n=te.getSvg(e);if(n===null)return null;for(var r=Pe.length-1;r>=0;r--)if(Pe[r].svg===n)return Pe[r].instance.getPublicInstance();return Pe.push({svg:n,instance:new V(n,t)}),Pe[Pe.length-1].instance.getPublicInstance()},Zc=Dc;const Rc=Bc(Zc),Vc={getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const r={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:r.height-t.y,left:-t.x,right:r.width-t.x},center:{x:r.width/2-t.x,y:r.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:r,height:i}=this.getSizes(),s=t/n,a=r/i,l=s<a?n*a:t,c=s>a?t/a:n,f=Math.min(r/l,i/c),u=this.getRealZoom(),h=this.getZoom(),d=u/h;this.zoom(f/d);const g={x:(e.left+t/2)*f,y:(e.top+n/2)*f};this.pan({x:-g.x+l/2*f,y:-g.y+c/2*f})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const r=Math.max(1e-4,t),i=Math.max(r,n),s=Math.max(Math.min(i,e),r),a=this.getRealZoom(),l=this.getZoom(),c=a/l;this.setMinZoom(r/c).setMaxZoom(i/c).zoom(s/c)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function Hc(e,t){var r,i;const n=e;return n._isPanEnabled=(r=t.panEnabled)!=null?r:!0,n._isZoomEnabled=(i=t==null?void 0:t.zoomEnabled)!=null?i:!0,n._internalIsPanEnabled=n.isPanEnabled,n._internalEnablePan=n.enablePan,n._internalDisablePan=n.disablePan,n._internalIsZoomEnabled=n.isZoomEnabled,n._internalEnableZoom=n.enableZoom,n._internalDisableZoom=n.disableZoom,Object.assign(e,Vc),n}function Fc(e,t){var s,a,l,c,f,u;const n=(a=(s=t.customEventsHandler)==null?void 0:s.init)!=null?a:h=>{},r=(c=(l=t.customEventsHandler)==null?void 0:l.destroy)!=null?c:h=>{},i=(u=(f=t.customEventsHandler)==null?void 0:f.haltEventListeners)!=null?u:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:h=>{Hc(h.instance,t),n(h)},destroy:h=>r(h),haltEventListeners:i},Rc(e,t)}function Wc(e,t){const n=o.ref();let r=0;const i=[],s=[],a=()=>{r=1,i.forEach(u=>u()),i.length=0},l=()=>{r=2,s.forEach(u=>u()),s.length=0};return o.onMounted(()=>{var k,w,m,y,S,b;const u=Z(e.value,"<svg>"),h=(w=(k=t.customEventsHandler)==null?void 0:k.init)!=null?w:p=>{},d=(y=(m=t.customEventsHandler)==null?void 0:m.destroy)!=null?y:p=>{},g=(b=(S=t.customEventsHandler)==null?void 0:S.haltEventListeners)!=null?b:[];t.customEventsHandler={init:p=>{n.value=p.instance,h(p),a()},destroy:p=>{l(),d(p)},haltEventListeners:g};const E=()=>{const p=u.getBoundingClientRect();p.width!==0&&p.height!==0?Fc(u,t):setTimeout(E,200)};E()}),o.onUnmounted(()=>{var u;(u=n.value)==null||u.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:u=>{r===0?i.push(u):r===1&&u()},onSvgPanZoomUnmounted:u=>{r===0||r===1?s.push(u):u()}}}const nr=Symbol("zoomLevel");function Uc(e,t){const n=o.computed(()=>t.scalingObjects?1:1/e.value);return o.provide(nr,{zoomLevel:e,scale:n}),{scale:n}}function re(){return Z(o.inject(nr),"zoomLevel")}function Gc(e){return e instanceof Promise||e&&typeof e.then=="function"}function Xc(){let e=null;const t=o.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(r,i=300,s="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:i,timingFunction:s},o.nextTick(()=>ce(this,null,function*(){const a=r();Gc(a)&&(yield a),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},i)}))}return{transitionWhile:n,transitionOption:t}}function qc(e){const t=o.ref({}),n=o.ref(!1);let r=1;const i=new Map;return o.watchEffect(()=>{if(e.value instanceof Array){const s=new Set([]);if(t.value=Object.fromEntries(e.value.map(a=>{let l=a.id;return l||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),l=i.get(a),l||(l="path-"+r++,i.set(a,l))),s.add(l),[l,a]})),n.value)for(const[a,l]of Array.from(i.entries()))s.has(l)||i.delete(a)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function Kc(e,t,n,r){if(r){const s=o.ref(r(e[t])),a=l=>{Ee(l,s.value)||(s.value=l),Ee(l,e[t])||n(`update:${t}`,l)};return o.watch(()=>r(s.value),a),o.watch(()=>e[t],l=>a(r(l))),s.value!==e[t]&&n(`update:${t}`,s.value),s}const i=o.ref(e[t]);return o.watch(()=>e[t],s=>{Ee(s,i.value)||(i.value=s)}),o.watch(i,s=>{Ee(s,e[t])||n(`update:${t}`,s)}),i}function vn(e,t,n,r){const i=o.reactive(new Set);return o.watch(()=>e[t],()=>{const a=e[t].filter(l=>l in n.value);Ee(a,Array.from(i))||(i.clear(),a.forEach(i.add,i))},{deep:!0,immediate:!0}),o.watch(i,()=>{const s=Array.from(i);Ee(e[t],s)||r(`update:${t}`,s)}),ue(i)}const or=Symbol("selection");function Yc(e,t,n){o.provide(or,{selectedNodes:e,selectedEdges:t,selectedPaths:n})}function Qc(){return Z(o.inject(or),"Selections")}const rr=Symbol("layouts");function Jc(e){o.provide(rr,e)}function bn(){return Z(o.inject(rr),"Layouts")}function eu(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1])}function nt(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function tu(e,t,n){const r=e.indexOf(t);r<0||e.splice(r+1,0,n)}function nu(e,t){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return o.computed(()=>{const r=wl(e.view.builtInLayerOrder).filter(s=>{const a=n.includes(s);return a||console.warn(`Layer ${s} is not a built-in layer.`),a}).reverse(),i=[...n];return eu(r,(s,a)=>{nt(i,a),tu(i,s,a)}),"edge-label"in t||"edges-label"in t||nt(i,"edge-labels"),e.node.focusring.visible||nt(i,"focusring"),e.node.label.visible===!1&&nt(i,"node-labels"),e.path.visible||nt(i,"paths"),i})}const ir=()=>new Promise(e=>o.nextTick(e));function ou(e,t){const n=Math.max(e.width,e.height,t.width,t.height)/1e4;return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n&&Math.abs(e.width-t.width)<n&&Math.abs(e.height-t.height)<n}function ru(e,t){return{top:e.top+t.top,left:e.left+t.left,right:e.right+t.right,bottom:e.bottom+t.bottom}}function iu(e,t){return{top:e.top*t,left:e.left*t,right:e.right*t,bottom:e.bottom*t}}function su(e,t){return{top:e.top/t,left:e.left/t,right:e.right/t,bottom:e.bottom/t}}function sr(e){return{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function ar(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function au(e,t){return{top:Math.min(e.top,t.top),left:Math.min(e.left,t.left),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}}const lu=new RegExp("^\\d+$");function cu(e,t){let n={top:0,left:0,right:0,bottom:0};if(typeof e=="string"){const r=Re(e,t.width),i=Re(e,t.height);r===void 0||i===void 0?console.warn("Invalid `fitContentMargin` value.",e):n={top:i,left:r,right:r,bottom:i}}else if(typeof e=="number"){const r=e;n={top:r,left:r,right:r,bottom:r}}else{if(e.top){const r=Re(e.top,t.height);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.top):n.top=r}if(e.left){const r=Re(e.left,t.width);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.left):n.left=r}if(e.right){const r=Re(e.right,t.width);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.right):n.right=r}if(e.bottom){const r=Re(e.bottom,t.height);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.bottom):n.bottom=r}}return n}function uu(e,t,n,r,i,s){const a=e.getBBox();if(s)return fu(a,t,n,i);{const l=du(e);return hu(a,l,t,n,r,i)}}function Re(e,t){if(typeof e=="string"){if(e.endsWith("%")){const n=parseInt(e.toString());if(Number.isFinite(n))return t*(n/100)}else if(e.endsWith("px")||lu.test(e)){const n=parseInt(e.toString());if(Number.isFinite(n))return n}}else if(typeof e=="number")return e}function du(e){return Array.from(e.querySelectorAll(".v-ng-graph-objects")).map(n=>n.getBBox()).reduce((n,r,i)=>{if(i===0)return r;const s=Math.min(n.x,r.x),a=Math.min(n.y,r.y);return{x:s,y:a,width:Math.max(n.x+n.width-s,r.x+r.width-s),height:Math.max(n.y+n.height-a,r.y+r.height-a)}},{x:0,y:0,width:0,height:0})}function fu(e,t,n,r){if(Object.keys(n).length<=1)return;const i=lr(e,t,r);if(i>0){const s=sr(e);return{zoom:i,pos:cr(s,i,t,r)}}else return}function hu(e,t,n,r,i,s){if(Object.keys(r).length<=1)return;const a=Fl(r),l={top:(a.top-t.y)*i,left:(a.left-t.x)*i,right:(t.x+t.width-a.right)*i,bottom:(t.y+t.height-a.bottom)*i};let c=lr(e,n,s);if(c===0)return;const f=_t(n,ru(s,l));if(f.width<=0||f.height<=0)return;const u=sr(e),h=_t(n,s),d=ou(e,t);let g=0,E=0,k={top:0,left:0,right:0,bottom:0};do{E=c;const w=su(l,c),m={top:a.top-w.top,left:a.left-w.left,right:a.right+w.right,bottom:a.bottom+w.bottom};k=d?m:au(u,m);const y=ar(k),b=[h.width/y.width,h.height/y.height].filter(p=>p>0);if(b.length===0)return;c=Math.min(...b),g++}while(Math.abs(E-c)>1e-6&&g<10);return{zoom:c,pos:cr(k,c,n,s)}}function lr(e,t,n){if(e.width===0||e.height===0)return 0;const r=_t(t,n);if(r.width<=0||r.height<=0)return 0;const i=[r.width/e.width,r.height/e.height];return Math.min(...i)}function cr(e,t,n,r){const i=_t(n,r),s=ar(iu(e,t)),a=(i.width-s.width)/2,l=(i.height-s.height)/2,c=s.x-r.left,f=s.y-r.top;return{x:-c+a,y:-f+l}}function _t(e,t){const n=t.left+t.right,r=t.top+t.bottom;return{width:e.width-n,height:e.height-r}}const pu=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],gu=o.defineComponent({__name:"VSelectionBox",props:{box:{},config:{}},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("rect",{class:"v-ng-selection-box",x:Math.round(t.box.pos.x),y:Math.round(t.box.pos.y),width:Math.ceil(t.box.size.width),height:Math.ceil(t.box.size.height),fill:t.config.color,stroke:t.config.strokeColor,"stroke-width":t.config.strokeWidth,"stroke-dasharray":t.config.strokeDasharray},null,8,pu))}}),mu=["points","fill"],vu=o.defineComponent({__name:"VMarkerHeadArrow",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(e){const t=e,n=o.computed(()=>{const r=t.width,i=t.height;return t.isSource?`${r} ${i}, 0 ${i/2}, ${r} 0`:`0 0, ${r} ${i/2}, 0 ${i}`});return(r,i)=>(o.openBlock(),o.createElementBlock("polygon",{points:n.value,fill:r.color},null,8,mu))}}),bu=["points","stroke-width","stroke"],yu=o.defineComponent({__name:"VMarkerHeadAngle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(e){const t=e,n=o.computed(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),r=o.computed(()=>{const i=n.value/2,s=t.width,a=t.height;return t.isSource?`${s-i} ${a-i}, ${i} ${a/2}, ${s-i} ${i}`:`${i} ${i}, ${s-i} ${a/2}, ${i} ${a-i}`});return(i,s)=>(o.openBlock(),o.createElementBlock("polyline",{points:r.value,fill:"none","stroke-width":n.value,stroke:i.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,bu))}}),wu=["fill","cx","cy","rx","ry"],Eu=o.defineComponent({__name:"VMarkerHeadCircle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("ellipse",{fill:t.color,cx:t.width/2,cy:t.height/2,rx:t.width/2,ry:t.height/2},null,8,wu))}}),ku=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Su=o.defineComponent({__name:"VMarkerHead",props:{id:{},marker:{},scale:{}},setup(e){const t={arrow:vu,angle:yu,circle:Eu},n=e,r=o.computed(()=>n.marker.width*(n.marker.units==="strokeWidth"?1:n.scale)),i=o.computed(()=>n.marker.height*(n.marker.units==="strokeWidth"?1:n.scale)),s=o.computed(()=>{const l=n.marker.margin*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?r.value+l:-l}),a=o.computed(()=>{const l=n.marker.offset*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?l:-l});return(l,c)=>l.marker.type!=="none"&&l.marker.type!=="custom"?(o.openBlock(),o.createElementBlock("marker",{key:0,id:l.id,markerWidth:r.value,markerHeight:i.value,refX:s.value,refY:i.value/2+a.value,orient:"auto",markerUnits:l.marker.units,class:"v-ng-marker"},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(t[l.marker.type]),{width:r.value,height:i.value,refX:s.value,color:l.marker.color,"is-source":l.marker.isSource,units:l.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,ku)):o.createCommentVNode("",!0)}}),Pu={class:"v-ng-background-grid","shape-rendering":"crispEdges"},xu=["d"],Mu=["d"],Cu=["d"],Tu=["d"],Ou=o.defineComponent({__name:"VBackgroundGrid",setup(e){const{container:t,svgPanZoom:n}=Me(),{zoomLevel:r}=re(),i=_c(),s=Cl(),a=o.ref({x:0,y:0}),l=o.ref({width:500,height:500});o.onMounted(()=>{var E;const d=(E=n.value)==null?void 0:E.getPan();d&&(a.value={x:-d.x,y:-d.y});const g=t.value.getBoundingClientRect();l.value={width:g.width,height:g.height}}),i.on("view:resize",d=>{l.value={width:d.width,height:d.height}}),i.on("view:pan",d=>{a.value={x:-d.x,y:-d.y}}),i.on("view:zoom",()=>{var g;const d=(g=n.value)==null?void 0:g.getPan();d&&(a.value={x:-d.x,y:-d.y})});const c=o.ref([]),f=o.ref([]),u=o.ref([]),h=o.ref([]);return o.watchEffect(()=>{const d=[],g=[],E=[],k=[],w=1/r.value,m=s.grid.interval,y=a.value.x*w,S=a.value.y*w,b=Math.floor(l.value.width/m+1)*m,p=Math.floor(l.value.height/m+1)*m,v=(a.value.x+b)*w,P=(a.value.y+p)*w,M=s.grid.thickIncrements,_=s.grid.line.dasharray,C=s.grid.thick.dasharray;let T={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":C,"stroke-dashoffset":C?y/w:void 0},B={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":_,"stroke-dashoffset":_?y/w:void 0};const L=(a.value.x+b)*w;for(let N=S;N<=P;N+=m){const R=Math.floor(N/m);M&&R%M===0?d.push([R,R*m,y,L,T]):E.push([R,R*m,y,L,B])}T=K({},T),T["stroke-dashoffset"]=C?S/w:void 0,B=K({},B),B["stroke-dashoffset"]=_?S/w:void 0;const H=(a.value.y+p)*w;for(let N=y;N<=v;N+=m){const R=Math.floor(N/m);M&&R%M===0?g.push([R,R*m,S,H,T]):k.push([R,R*m,S,H,B])}f.value=d,c.value=g,h.value=E,u.value=k}),(d,g)=>(o.openBlock(),o.createElementBlock("g",Pu,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(h.value,([E,k,w,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nv${E}`,d:`M ${w} ${k} L ${m} ${k}`,ref_for:!0},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,xu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(u.value,([E,k,w,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nh${E}`,d:`M ${k} ${w} L ${k} ${m}`,ref_for:!0},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Mu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(f.value,([E,k,w,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`tv${E}`,d:`M ${w} ${k} L ${m} ${k}`,ref_for:!0},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Cu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.value,([E,k,w,m,y])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`th${E}`,d:`M ${k} ${w} L ${k} ${m}`,ref_for:!0},y,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Tu))),128))]))}}),_u=o.defineComponent({__name:"VBackgroundViewport",setup(e){const{viewport:t}=Me(),n=o.ref(),r=(s,a,l)=>{s.forEach(c=>{var f;return a.setAttribute(c,(f=l.getAttribute(c))!=null?f:"")})},i=new MutationObserver(s=>{if(!n.value)return;const a=s.map(l=>{var c;return(c=l.attributeName)!=null?c:""}).filter(Boolean);r(a,n.value,t.value)});return o.onMounted(()=>{const s=["transform","style"];i.observe(t.value,{attributes:!0,attributeFilter:s}),n.value&&r(s,n.value,t.value)}),o.onUnmounted(()=>{i.disconnect()}),(s,a)=>(o.openBlock(),o.createElementBlock("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[o.renderSlot(s.$slots,"default")],512))}}),Bu=["d","stroke-width"],zu=o.defineComponent({__name:"VEdgeBackground",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=yt(),{handleEdgePointerDownEvent:i,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:a,handleEdgeClickEvent:l,handleEdgeDoubleClickEvent:c,handleEdgeContextMenu:f}=tt(),u=o.computed(()=>{const d=t.state.position;if(t.state.loop){const{radius:g,isLargeArc:E,isClockwise:k}=t.state.loop,[w,m]=g,y=E?1:0,S=k?1:0;return`M ${d.p1.x} ${d.p1.y} A ${w} ${m} 0 ${y} ${S} ${d.p2.x} ${d.p2.y}`}else{if(r.type==="straight"||!t.state.curve)return`M ${d.p1.x} ${d.p1.y} L ${d.p2.x} ${d.p2.y}`;{const g=[...t.state.curve.control,{x:d.p2.x,y:d.p2.y}],E=[];return E.push(`M ${d.p1.x} ${d.p1.y}`),Zt(g,2).forEach(([k,w])=>E.push(`Q ${k.x} ${k.y} ${w.x} ${w.y}`)),E.join(" ")}}}),h=o.computed(()=>(t.state.line.stroke.width+10)*n.value);return(d,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line-background":!0,selectable:d.state.selectable}),d:u.value,stroke:"transparent","stroke-width":h.value,fill:"none",onPointerdown:g[0]||(g[0]=o.withModifiers(E=>o.unref(i)(d.id,E),["stop"])),onPointerenterPassive:g[1]||(g[1]=E=>o.unref(s)(d.id,E)),onPointerleavePassive:g[2]||(g[2]=E=>o.unref(a)(d.id,E)),onClick:g[3]||(g[3]=o.withModifiers(E=>o.unref(l)(d.id,E),["stop"])),onDblclick:g[4]||(g[4]=o.withModifiers(E=>o.unref(c)(d.id,E),["stop"])),onContextmenu:g[5]||(g[5]=E=>o.unref(f)(d.id,E))},null,42,Bu))}}),Iu=o.defineComponent({__name:"VEdgeBackgrounds",setup(e){const{edgeStates:t,edgeGroupStates:n,layouts:r}=le();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n).edgeGroups,({summarize:a,edges:l})=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[a?o.createCommentVNode("",!0):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(l,(c,f)=>(o.openBlock(),o.createBlock(zu,{key:f,id:f,state:o.unref(t)[f],"source-pos":o.unref(r).nodes[c.source],"target-pos":o.unref(r).nodes[c.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),$u=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],ur=o.defineComponent({__name:"VLine",props:{p1:{},p2:{},config:{}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Ye(t.config.dasharray,n.value)),s=o.computed(()=>{const a=t.config.animate?mt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return a?{"--animation-speed":a}:void 0});return(a,l)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:a.config.animate}),d:`M ${a.p1.x} ${a.p1.y} L ${a.p2.x} ${a.p2.y}`,stroke:a.config.color,"stroke-width":r.value,"stroke-dasharray":i.value,"stroke-linecap":a.config.linecap,style:o.normalizeStyle(s.value)},null,14,$u))}}),Au=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Lu=o.defineComponent({__name:"VArc",props:{p1:{},p2:{},radius:{},isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:{}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>Ye(t.config.dasharray,n.value)),s=o.computed(()=>{const l=t.config.animate?mt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0}),a=o.computed(()=>{const{p1:l,p2:c,radius:f,isLargeArc:u,isClockwise:h}=t,[d,g]=f,E=u?1:0,k=h?1:0;return`M ${l.x} ${l.y} A ${d} ${g} 0 ${E} ${k} ${c.x} ${c.y}`});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:l.config.animate}),d:a.value,stroke:l.config.color,"stroke-width":r.value,"stroke-dasharray":i.value,"stroke-linecap":l.config.linecap,style:o.normalizeStyle(s.value),fill:"none"},null,14,Au))}}),Nu=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],ju=o.defineComponent({__name:"VEdgeCurved",props:{state:{},config:{},markerStart:{default:void 0},markerEnd:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var u,h;const l=t.state.position,c=[...(h=(u=t.state.curve)==null?void 0:u.control)!=null?h:[],{x:l.p2.x,y:l.p2.y}],f=[];return f.push(`M ${l.p1.x} ${l.p1.y}`),Zt(c,2).forEach(([d,g])=>f.push(`Q ${d.x} ${d.y} ${g.x} ${g.y}`)),f.join(" ")}),i=o.computed(()=>t.config.width*n.value),s=o.computed(()=>Ye(t.config.dasharray,n.value)),a=o.computed(()=>{const l=t.config.animate?mt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:l.config.animate}),d:r.value,fill:"none",stroke:l.config.color,"stroke-width":i.value,"stroke-dasharray":s.value,"stroke-linecap":l.config.linecap,style:o.normalizeStyle(a.value),"marker-start":l.markerStart,"marker-end":l.markerEnd},null,14,Nu))}}),Du=o.defineComponent({__name:"VEdge",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=yt();return(n,r)=>n.state.loop?(o.openBlock(),o.createBlock(Lu,o.mergeProps({key:0},n.state.position,{radius:n.state.loop.radius,"is-large-arc":n.state.loop.isLargeArc,"is-clockwise":n.state.loop.isClockwise,class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):o.unref(t).type=="straight"||!n.state.curve?(o.openBlock(),o.createBlock(ur,o.mergeProps({key:1,"data-edge-id":n.id},n.state.position,{class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(o.openBlock(),o.createBlock(ju,{key:2,"data-edge-id":n.id,class:o.normalizeClass([{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"]),state:n.state,config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),Zu=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],Ru=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],ot=o.defineComponent({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:{}},setup(e){const t=e,{scale:n}=re(),r=o.ref(t.baseX),i=o.ref(t.baseY),s=o.ref(0),a=o.ref("#000000"),l=o.ref(void 0),c=o.ref(0),f=o.ref(0),u=o.ref(0),h=o.ref(0);return o.watchEffect(()=>{var g;const d=n.value;s.value=t.config.strokeWidth*d,a.value=(g=t.config.strokeColor)!=null?g:"none",l.value=Ye(t.config.strokeDasharray,d),t.config.type==="circle"?(r.value=t.baseX,i.value=t.baseY,c.value=t.config.radius*d):(f.value=t.config.width*d,u.value=t.config.height*d,h.value=t.config.borderRadius*d,r.value=t.baseX-f.value/2,i.value=t.baseY-u.value/2)}),(d,g)=>d.config.type==="circle"?(o.openBlock(),o.createElementBlock("circle",{key:0,class:"v-ng-shape-circle",cx:r.value,cy:i.value,r:c.value,fill:d.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Zu)):(o.openBlock(),o.createElementBlock("rect",{key:1,class:"v-ng-shape-rect",x:r.value,y:i.value,width:f.value,height:u.value,rx:h.value,ry:h.value,fill:d.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Ru))}}),Vu=["rx","ry","fill","transform"],Hu=["x","y","dominant-baseline","font-family","font-size","fill"],Fu=["x","dy","dominant-baseline"],rt=o.defineComponent({__name:"VLabelText",props:{text:{},x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:{}},setup(e){const t=e,n=o.useAttrs(),{scale:r}=re(),i=o.computed(()=>{var w,m;return(m=(w=t.text)==null?void 0:w.toString().split(/\r?\n/))!=null?m:""}),s=o.computed(()=>{var w;return(w=n["font-size"])!=null?w:t.config.fontSize*r.value}),a=o.computed(()=>s.value*t.config.lineHeight),l=o.computed(()=>{const w=t.dominantBaseline;return w==="hanging"?0:w==="central"?-(a.value*(i.value.length-1))/2:-a.value*(i.value.length-1)}),c=o.ref(),f=o.ref(""),u=o.reactive({x:0,y:0,width:0,height:0}),h=o.computed(()=>{var b,p;const w=t.config.background;if(!w)return u;let m,y;w.padding instanceof Object?(m=w.padding.vertical,y=w.padding.horizontal):(m=(b=w.padding)!=null?b:0,y=(p=w.padding)!=null?p:0);const S=a.value-s.value;return{x:u.x-y*r.value,y:u.y-m*r.value-S/2,width:u.width+y*2*r.value,height:u.height+m*2*r.value+S}});let d;const g=()=>{t.config.background&&t.config.background.visible?!d&&c.value&&(d=k(c.value,u,f)):(d==null||d.disconnect(),d=void 0)};o.onMounted(()=>g()),o.watch(()=>t.config.background&&t.config.background.visible,(w,m)=>{w!=m&&g()}),o.onUnmounted(()=>{d==null||d.disconnect(),d=void 0});function E(w,m,y){var b;const S=w.getBBox();m.x=S.x,m.y=S.y,m.width=S.width,m.height=S.height,y.value=(b=w.getAttribute("transform"))!=null?b:void 0}function k(w,m,y){const S=new MutationObserver(()=>{E(w,m,y)});return S.observe(w,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),E(w,m,y),S}return(w,m)=>{var y,S,b,p,v,P;return o.openBlock(),o.createElementBlock(o.Fragment,null,[w.config.background&&w.config.background.visible?(o.openBlock(),o.createElementBlock("rect",o.mergeProps({key:0,class:"v-ng-text-background"},h.value,{rx:((S=(y=w.config.background)==null?void 0:y.borderRadius)!=null?S:0)*o.unref(r),ry:((p=(b=w.config.background)==null?void 0:b.borderRadius)!=null?p:0)*o.unref(r),fill:(P=(v=w.config.background)==null?void 0:v.color)!=null?P:"#ffffff",transform:f.value}),null,16,Vu)):o.createCommentVNode("",!0),o.createElementVNode("text",o.mergeProps({ref_key:"element",ref:c,class:"v-ng-text"},w.$attrs,{x:w.x,y:w.y,"dominant-baseline":w.dominantBaseline,"font-family":w.$attrs["font-family"]?`${w.$attrs["font-family"]}`:w.config.fontFamily,"font-size":s.value,fill:w.$attrs.fill?`${w.$attrs.fill}`:w.config.color}),[i.value.length<=1?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(w.text),1)],64)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(i.value,(M,_)=>(o.openBlock(),o.createElementBlock("tspan",{key:_,x:w.x,dy:_==0?l.value:a.value,"dominant-baseline":w.dominantBaseline},o.toDisplayString(M),9,Fu))),128))],16,Hu)],64)}}}),Wu=o.defineComponent({__name:"VEdgeSummarized",props:{edges:{},layouts:{}},setup(e){const t=e,n=yt(),{handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:i,handleEdgesPointerOutEvent:s,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:l,handleEdgesContextMenu:c}=tt(),{edgeStates:f}=le(),u=o.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),h=o.ref({x:0,y:0});o.watchEffect(()=>{const S=Object.keys(t.edges).find(b=>b in f);S&&(u.value=f[S].position,h.value={x:(u.value.p1.x+u.value.p2.x)/2,y:(u.value.p1.y+u.value.p2.y)/2})});const d=o.computed(()=>Object.keys(t.edges)),g=o.computed(()=>O.values(n.summarized.label,t.edges)),E=o.computed(()=>O.values(n.summarized.shape,t.edges)),k=o.computed(()=>O.values(n.summarized.stroke,t.edges)),w=o.computed(()=>d.value.some(S=>f[S].hovered)),m=o.computed(()=>d.value.some(S=>f[S].selectable)),y=o.computed(()=>d.value.some(S=>f[S].selected));return(S,b)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-line-summarized":!0,hovered:w.value,selectable:m.value,selected:y.value}),onPointerdown:b[0]||(b[0]=o.withModifiers(p=>o.unref(r)(d.value,p),["stop"])),onPointerenterPassive:b[1]||(b[1]=p=>o.unref(i)(d.value,p)),onPointerleavePassive:b[2]||(b[2]=p=>o.unref(s)(d.value,p)),onClick:b[3]||(b[3]=o.withModifiers(p=>o.unref(a)(d.value,p),["stop"])),onDblclick:b[4]||(b[4]=o.withModifiers(p=>o.unref(l)(d.value,p),["stop"])),onContextmenu:b[5]||(b[5]=p=>o.unref(c)(d.value,p))},[o.createVNode(ur,o.mergeProps(u.value,{config:k.value,"data-edge-id":d.value[0]}),null,16,["config","data-edge-id"]),o.createVNode(ot,{"base-x":h.value.x,"base-y":h.value.y,config:E.value},null,8,["base-x","base-y","config"]),o.createVNode(rt,{text:Object.keys(S.edges).length.toString(),x:h.value.x,y:h.value.y,config:g.value,"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),Uu={class:"v-ng-edge-overlay"},dr=o.defineComponent({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:{},isSummarized:{type:Boolean}},setup(e){const t=e,{svg:n}=Me(),{scale:r}=re(),i=yt();function s(){return t.isSummarized?O.values(i.summarized.stroke,t.edges):t.state.line.stroke}function a(u){return{source:u.p1,target:u.p2}}function l(u){if(u.curve)return u.curve.center;{const h=u.origin.p1,d=u.origin.p2;return{x:(h.x+d.x)/2,y:(h.y+d.y)/2}}}function c(){var d;if(!n.value)return 0;const u=(d=t.edgeId)!=null?d:Object.keys(t.edges)[0],h=n.value.querySelector(`path[data-edge-id="${u}"]`);return h?h.getTotalLength():0}function f(u){var E;if(!n.value||!isFinite(u))return t.state.position.p1;t.state;const h=(E=t.edgeId)!=null?E:Object.keys(t.edges)[0],d=n.value.querySelector(`path[data-edge-id="${h}"]`);if(!d)return t.state.position.p1;const g=d.getPointAtLength(u);return{x:g.x,y:g.y}}return(u,h)=>(o.openBlock(),o.createElementBlock("g",Uu,[u.isSummarized?o.renderSlot(u.$slots,"default",{key:0,edges:u.edges,isSummarized:u.isSummarized,stroke:s(),position:a(u.state.origin),center:l(u.state),hovered:u.state.hovered,selected:u.state.selected,scale:o.unref(r),length:c(),pointAtLength:f}):o.renderSlot(u.$slots,"default",{key:1,edgeId:u.edgeId,edge:u.edge,edges:{[u.edgeId]:u.edge},isSummarized:u.isSummarized,stroke:s(),position:a(u.state.origin),center:l(u.state),hovered:u.state.hovered,selected:u.state.selected,scale:o.unref(r),length:c(),pointAtLength:f})]))}}),Gu=o.defineComponent({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(e){const{edgeStates:t,edgeZOrderedList:n,layouts:r}=le();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(rc)(a)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[(o.openBlock(),o.createBlock(Wu,{key:a.key,edges:a.group.edges,layouts:o.unref(r).nodes},null,8,["edges","layouts"])),i.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(dr,{key:a.key,edges:a.group.edges,state:o.unref(t)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.mergeProps({ref_for:!0},l))]),_:2},1032,["edges","state"])):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[(o.openBlock(),o.createBlock(Du,{id:a.key,key:a.key,state:o.unref(t)[a.key],"source-pos":o.unref(r).nodes[a.edge.source],"target-pos":o.unref(r).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),i.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(dr,{key:a.key,"edge-id":a.key,edge:a.edge,state:o.unref(t)[a.key],"is-summarized":!1},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.mergeProps({ref_for:!0},l))]),_:2},1032,["edge-id","edge","state"])):o.createCommentVNode("",!0)],64))],64))),256))}}),Xu={class:"v-ng-layer-edges v-ng-graph-objects"},qu=o.defineComponent({__name:"VEdgesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"edge-overlay"in t);return(r,i)=>(o.openBlock(),o.createElementBlock("g",Xu,[o.createVNode(Iu),o.createVNode(Gu,{"has-edge-overlay-slot":n.value},o.createSlots({_:2},[n.value?{name:"default",fn:o.withCtx(s=>[o.renderSlot(r.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(s)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),Ku=o.defineComponent({__name:"VEdgeLabelPlace",props:{edgeId:{},edge:{},state:{}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>Lo(t.state.labelPosition,t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value));return(i,s)=>i.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edgeId:i.edgeId,edge:i.edge,config:i.state.label,area:r.value,hovered:i.state.hovered,selected:i.state.selected,scale:o.unref(n)})}}),Yu=o.defineComponent({__name:"VEdgeLabelsPlace",props:{edges:{},state:{},summarizeState:{}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var i,s;return Lo(t.state.labelPosition,(s=(i=t.summarizeState)==null?void 0:i.stroke)!=null?s:t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value)});return(i,s)=>i.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edges:i.edges,config:i.state.label,area:r.value,hovered:i.state.hovered,selected:i.state.selected,scale:o.unref(n)})}}),Qu={class:"v-ng-edge-labels"},Ju=o.defineComponent({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){const{edgeStates:t,edgeGroupStates:n,summarizedEdgeStates:r}=le(),i=o.computed(()=>{const a={},l={};return Object.entries(n.edgeGroups).forEach(([c,f])=>{Object.keys(f.edges).length>0&&(f.summarize?l[c]=f:a[c]=f)}),{individual:a,summarized:l}});function s(a){return Object.keys(a.edges)[0]}return(a,l)=>(o.openBlock(),o.createElementBlock("g",Qu,[a.enableEdgeLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(i.value.individual,(c,f)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:f},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.edges,(u,h)=>(o.openBlock(),o.createBlock(Ku,{key:h,"edge-id":h,edge:u,state:o.unref(t)[h]},{default:o.withCtx(d=>[o.renderSlot(a.$slots,"edge-label",o.mergeProps({ref_for:!0},d))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):o.createCommentVNode("",!0),a.enableEdgesLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(i.value.summarized,(c,f)=>(o.openBlock(),o.createBlock(Yu,{key:f,edges:c.edges,state:o.unref(t)[s(c)],"summarize-state":o.unref(r)[s(c)]},{default:o.withCtx(u=>[o.renderSlot(a.$slots,"edges-label",o.mergeProps({ref_for:!0},u))]),_:2},1032,["edges","state","summarize-state"]))),128)):o.createCommentVNode("",!0)]))}}),ed=o.defineComponent({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){return(t,n)=>(o.openBlock(),o.createBlock(Ju,{"enable-edge-label":t.enableEdgeLabel,"enable-edges-label":t.enableEdgesLabel,class:"v-ng-layer-edge-labels v-ng-graph-objects"},o.createSlots({_:2},[t.enableEdgeLabel?{name:"edge-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"0"}:void 0,t.enableEdgesLabel?{name:"edges-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),td=o.defineComponent({__name:"VNodeFocusRing",props:{id:{},state:{},pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.x)||0}),r=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.y)||0}),i=bt(),s=o.reactive({});return o.watchEffect(()=>{var l,c,f;const a=t.state.shape;if(a.type==="circle"){const u={type:"circle",radius:a.radius+((l=a.strokeWidth)!=null?l:0)/2+i.focusring.padding+i.focusring.width/2,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}else{const u={type:"rect",width:a.width+((c=a.strokeWidth)!=null?c:0)+i.focusring.padding*2+i.focusring.width,height:a.height+((f=a.strokeWidth)!=null?f:0)+i.focusring.padding*2+i.focusring.width,borderRadius:a.borderRadius>0?a.borderRadius+i.focusring.padding:0,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}}),(a,l)=>(o.openBlock(),o.createBlock(ot,{class:"v-ng-node-focusring","base-x":n.value,"base-y":r.value,config:s},null,8,["base-x","base-y","config"]))}}),nd={class:"v-ng-layer-nodes-selections"},od=o.defineComponent({__name:"VFocusringLayer",setup(e){const{nodeStates:t}=le(),{selectedNodes:n}=Qc(),r=bn();return(i,s)=>(o.openBlock(),o.createElementBlock("g",nd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createBlock(td,{id:a,key:a,state:o.unref(t)[a],pos:o.unref(r).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),rd=["transform"],fr=o.defineComponent({__name:"VNode",props:{id:{},state:{},pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var h;return((h=t.pos)==null?void 0:h.x)||0}),r=o.computed(()=>{var h;return((h=t.pos)==null?void 0:h.y)||0}),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:f,handleNodeContextMenu:u}=tt();return(h,d)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-node":!0,hover:h.state.hovered,selected:h.state.selected}),transform:`translate(${n.value} ${r.value})`,onPointerdown:d[0]||(d[0]=o.withModifiers(g=>o.unref(s)(h.id,g),["stop"])),onPointerenterPassive:d[1]||(d[1]=g=>o.unref(a)(h.id,g)),onPointerleavePassive:d[2]||(d[2]=g=>o.unref(l)(h.id,g)),onClick:d[3]||(d[3]=o.withModifiers(g=>o.unref(c)(h.id,g),["stop"])),onDblclick:d[4]||(d[4]=o.withModifiers(g=>o.unref(f)(h.id,g),["stop"])),onContextmenu:d[5]||(d[5]=g=>o.unref(u)(h.id,g))},[o.renderSlot(h.$slots,"override-node",{nodeId:h.id,scale:o.unref(i),config:h.state.shape,class:o.normalizeClass({draggable:h.state.draggable,selectable:h.state.selectable})},()=>[o.createVNode(ot,{config:h.state.shape,class:o.normalizeClass({"v-ng-node-default":!0,draggable:h.state.draggable,selectable:h.state.selectable})},null,8,["config","class"])])],42,rd))}}),id=o.defineComponent({__name:"VNodesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node"in t),{nodeZOrderedList:r}=le(),i=bt(),s=bn();return(a,l)=>n.value?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(fr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},{"override-node":o.withCtx(f=>[o.renderSlot(a.$slots,"override-node",o.mergeProps({ref_for:!0},f))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(fr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),hr={[I.NORTH]:0,[I.NORTH_EAST]:1,[I.EAST]:2,[I.SOUTH_EAST]:3,[I.SOUTH]:4,[I.SOUTH_WEST]:5,[I.WEST]:6,[I.NORTH_WEST]:7,[I.CENTER]:-1},sd=[(e,t)=>xe(e,0,t?90:60),(e,t)=>xe(e,45,t?90:45),(e,t)=>xe(e,90,t?60:30),(e,t)=>xe(e,135,t?90:45),(e,t)=>xe(e,180,t?90:60),(e,t)=>xe(e,225,t?90:45),(e,t)=>xe(e,270,t?60:30),(e,t)=>xe(e,315,t?90:45)];function ad(e,t,n,r,i){if(i===I.CENTER)return I.CENTER;const s=[];Object.entries(n).forEach(([f,u])=>{let h=!1;if(u.nodeId===e){const g=r(f);g&&(h=!0,u=it(K({},u),{pos:{x:g.x,y:g.y}}))}const d=(nn(Kt(u.pos,t))+360+90)%360;s.push([d,h])});const a=ld(i),c=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(f=>s.every(u=>!sd[f](...u)));return c===void 0?i:cd(c,i)}function xe(e,t,n){e%=360;const r=(t-n+360)%360,i=(t+n)%360;return r<=i?r<e&&e<i:r<e||e<i}function ld(e){var t;return(t=hr[e])!=null?t:0}function cd(e,t){var n,r;return(r=(n=Object.entries(hr)[e])==null?void 0:n[0])!=null?r:t}const ud=["transform"],pr=o.defineComponent({__name:"VNodeLabel",props:{id:{},state:{},pos:{default:void 0}},setup(e){const t=e,n=bt(),{edgeStates:r}=le(),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:f,handleNodeContextMenu:u}=tt(),h=o.computed(()=>{var C;return((C=t.pos)==null?void 0:C.x)||0}),d=o.computed(()=>{var C;return((C=t.pos)==null?void 0:C.y)||0}),g=o.computed(()=>t.state.label.direction===I.CENTER?0:t.state.label.margin*i.value),E=o.ref(0),k=o.ref(0),w=o.ref(0),m=o.ref(0),y=o.computed(()=>{var L;const C=t.state.label.direction,T=t.state.label.directionAutoAdjustment;if(T===!1)return C;const B={x:h.value,y:d.value};return T===!0?ad(t.state.id,B,t.state.oppositeNodes,H=>{var N,R;return(R=(N=r[H])==null?void 0:N.loop)==null?void 0:R.center},C):(L=T({nodeId:t.state.id,pos:B,oppositeNodes:t.state.oppositeNodes}))!=null?L:C}),S=o.computed(()=>{switch(y.value){case I.CENTER:case I.NORTH:case I.SOUTH:return"middle";case I.EAST:case I.NORTH_EAST:case I.SOUTH_EAST:return"start";case I.WEST:case I.NORTH_WEST:case I.SOUTH_WEST:default:return"end"}}),b=o.computed(()=>{switch(y.value){case I.NORTH:case I.NORTH_EAST:case I.NORTH_WEST:return"text-top";case I.SOUTH:case I.SOUTH_EAST:case I.SOUTH_WEST:return"hanging";case I.CENTER:case I.EAST:case I.WEST:default:return"central"}}),p=o.computed(()=>{switch(y.value){case I.CENTER:case I.NORTH:case I.SOUTH:return 0;case I.EAST:return k.value;case I.WEST:return-k.value;case I.NORTH_EAST:case I.SOUTH_EAST:return m.value;case I.NORTH_WEST:case I.SOUTH_WEST:default:return-m.value}}),v=o.computed(()=>{switch(y.value){case I.NORTH:return-E.value;case I.SOUTH:return E.value;case I.CENTER:case I.EAST:case I.WEST:return 0;case I.NORTH_EAST:case I.NORTH_WEST:return-w.value;case I.SOUTH_EAST:case I.SOUTH_WEST:default:return w.value}});o.watchEffect(()=>{const C=i.value,T=t.state.shape;if(T.type=="circle"){const B=T.radius*C,L=B+g.value,H=Math.sqrt(Q(L,2)/2);E.value=B+g.value,k.value=B+g.value,w.value=H,m.value=H}else{const B=T.borderRadius*C,L=T.width*C,H=T.height*C,N=B+g.value,R=Math.sqrt(Q(N,2)/2);E.value=H/2+g.value,k.value=L/2+g.value,w.value=H/2-B+R,m.value=L/2-B+R}});const P=o.computed(()=>C=>n.label.handleNodeEvents?{pointerdown:T=>{T.stopPropagation(),s(C,T)},pointerenter:T=>a(C,T),pointerleave:T=>l(C,T),click:T=>{T.stopPropagation(),c(C,T)},dblclick:T=>{T.stopPropagation(),f(C,T)},contextmenu:T=>{u(C,T)}}:{}),M=o.computed(()=>{const C=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:C&&t.state.hovered,selected:C&&t.state.selected}}),_=o.computed(()=>{const C=n.label.handleNodeEvents;return{draggable:C&&t.state.draggable,selectable:C&&t.state.selectable}});return(C,T)=>(o.openBlock(),o.createElementBlock("g",o.mergeProps({class:M.value,transform:`translate(${h.value} ${d.value})`},o.toHandlers(P.value(C.id),!0)),[o.renderSlot(C.$slots,"override-node-label",{nodeId:C.id,scale:o.unref(i),text:C.state.labelText,x:p.value,y:v.value,config:C.state.label,shape:C.state.shape,textAnchor:S.value,dominantBaseline:b.value,class:o.normalizeClass(_.value)},()=>[o.createVNode(rt,{text:C.state.labelText,x:0,y:0,config:C.state.label,"text-anchor":S.value,"dominant-baseline":b.value,class:o.normalizeClass(_.value),transform:`translate(${p.value} ${v.value})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,ud))}}),dd=o.defineComponent({__name:"VNodeLabelsLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node-label"in t),{nodeZOrderedList:r}=le(),i=bt(),s=bn(),a=o.computed(()=>l(r.value));function l(c){return c.filter(f=>{var u;return f.label.visible&&((u=f.labelText)!=null?u:!1)})}return(c,f)=>n.value?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(a.value,u=>(o.openBlock(),o.createBlock(pr,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},{"override-node-label":o.withCtx(h=>[o.renderSlot(c.$slots,"override-node-label",o.mergeProps({ref_for:!0},h))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(a.value,u=>(o.openBlock(),o.createBlock(pr,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),fd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],hd=o.defineComponent({__name:"VPath",props:{path:{}},setup(e){const t=e,{nodeStates:n,edgeStates:r,layouts:i}=le(),{scale:s}=re(),a=Po();function l(d){if(d.edges.length===0)return[];const g=O.value(a.margin,d.path)*s.value;return Ul(d,n,i.nodes,r,s.value,a.curveInNode,a.end,g)}function c(d){const g=l(d);let E=!0;return g.map(k=>{if(k===null)E=!0;else{if(typeof k=="string")return k;if(k instanceof Array){k=[...k];const w=[];if(k.length%2===1){const m=k[0];k=k.slice(1),w.push(`L ${m.x} ${m.y}`)}return Zt(k,2).map(([m,y])=>w.push(`Q ${m.x} ${m.y} ${y.x} ${y.y}`)),w.join(" ")}else{const w=E;return E=!1,`${w?"M ":"L "}${k.x} ${k.y}`}}}).join(" ")}const f=o.computed(()=>{const d=t.path;return d.selected?O.values(a.selected,d.path):d.hovered&&a.hover?O.values(a.hover,d.path):O.values(a.normal,d.path)}),u=o.computed(()=>Ye(f.value.dasharray,s.value)),h=o.computed(()=>{const d=f.value.animate?mt(f.value.dasharray)*f.value.animationSpeed*s.value:!1;return d?{"--animation-speed":d}:void 0});return(d,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-path":!0,animate:f.value.animate,clickable:d.path.clickable,hoverable:d.path.hoverable}),d:c(d.path),fill:"none",stroke:f.value.color,"stroke-width":f.value.width*o.unref(s),"stroke-dasharray":u.value,"stroke-linecap":f.value.linecap,"stroke-linejoin":f.value.linejoin,style:o.normalizeStyle(h.value)},null,14,fd))}}),pd=o.defineComponent({__name:"VPaths",setup(e){const{pathZOrderedList:t}=le(),n=Po(),{handlePathPointerDownEvent:r,handlePathPointerOverEvent:i,handlePathPointerOutEvent:s,handlePathClickEvent:a,handlePathDoubleClickEvent:l,handlePathContextMenu:c}=tt();return(f,u)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{name:o.unref(n).transition,css:!!o.unref(n).transition,tag:"g",class:"v-ng-paths v-ng-layer-paths v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(t),h=>(o.openBlock(),o.createBlock(hd,{key:h.id,path:h,onPointerdown:d=>o.unref(r)(h.id,d),onPointerenterPassive:d=>o.unref(i)(h.id,d),onPointerleavePassive:d=>o.unref(s)(h.id,d),onClick:o.withModifiers(d=>o.unref(a)(h.id,d),["stop"]),onDblclick:o.withModifiers(d=>o.unref(l)(h.id,d),["stop"]),onContextmenu:d=>o.unref(c)(h.id,d)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),gd=o.defineComponent({__name:"VPathsLayer",setup(e){return(t,n)=>(o.openBlock(),o.createBlock(pd))}}),md={key:0},gr=o.defineComponent({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{expose:t,emit:n}){const r=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],i=e,s=n,a=o.useSlots(),l=o.toRef(i,"nodes"),c=o.toRef(i,"edges"),{objects:f,isInCompatibilityModeForPath:u}=qc(o.toRef(i,"paths")),h=Oc();Object.entries(i.eventHandlers).forEach(([x,$])=>{h.on(x,$)});const d=Ml(o.toRef(i,"configs")),g=o.computed(()=>{const x=new Set(Object.keys(a));r.forEach(z=>x.delete(z));const $=Object.fromEntries(q.map(z=>[z,[]]));return Object.assign($,Object.entries(i.layers).reduce((z,[D,G])=>(x.delete(D),G in z?z[G].push(D):z[G]=[D],z),{})),$.root.push(...x),$}),E=o.computed(()=>d.view.grid.visible),k=o.computed(()=>{const x=g.value;return E.value||x.background.length>0||x.grid.length>0}),w=nu(d,a),m=o.ref(),y=o.ref(),S=o.ref(),b=o.ref(0),p=o.computed(()=>b.value!==0),v=Kc(i,"zoomLevel",s,x=>(x=Math.max(x,d.view.minZoomLevel),x=Math.min(x,d.view.maxZoomLevel),x)),{svgPanZoom:P,onSvgPanZoomMounted:M,onSvgPanZoomUnmounted:_}=Wc(y,{viewportSelector:".v-ng-viewport",minZoom:d.view.minZoomLevel,maxZoom:d.view.maxZoomLevel,dblClickZoomEnabled:kr(d.view),mouseWheelZoomEnabled:En(d.view),fit:d.view.autoPanAndZoomOnLoad==="fit-content",center:d.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:d.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:x=>{var z,D;if(b.value===2)return;const $=(D=(z=P.value)==null?void 0:z.getRealZoom())!=null?D:1;Math.abs(v.value-$)>=1e-6&&(v.value=$,h.emit("view:zoom",$))},panEnabled:d.view.panEnabled,onPan:x=>{b.value!==2&&h.emit("view:pan",x)}});Bt({container:m,svg:y,viewport:S,svgPanZoom:P});const C={width:0,height:0},T=globalThis.ResizeObserver?new ResizeObserver(()=>{var $,z,D;if(($=P.value)==null||$.resize(),!d.view.autoPanOnResize)return;const x=(z=m.value)==null?void 0:z.getBoundingClientRect();if(x){const G=-(C.width-x.width)/2,Le=-(C.height-x.height)/2;(D=P.value)==null||D.panBy({x:G,y:Le});const{width:ve,height:kn}=x;(C.width!==ve||C.height!==kn)&&(Object.assign(C,{width:ve,height:kn}),h.emit("view:resize",{x:x.x,y:x.y,width:ve,height:kn}))}}):void 0;M(()=>{var G,Le,ve;const x=Z(m.value,"svg-pan-zoom container");T==null||T.observe(x),(Le=(G=d.view).onSvgPanZoomInitialized)==null||Le.call(G,Z(P.value,"svg-pan-zoom instance"));const $=x.getBoundingClientRect(),{width:z,height:D}=$;Object.assign(C,{width:z,height:D}),(ve=S.value)==null||ve.addEventListener("touchstart",Sr,{passive:!1})}),_(()=>{var x;T==null||T.disconnect(),(x=S.value)==null||x.removeEventListener("touchstart",Sr)});const B=x=>{var $;($=P.value)==null||$.applyAbsoluteZoomLevel(x,d.view.minZoomLevel,d.view.maxZoomLevel)};o.watch(()=>d.view.panEnabled,x=>{var $;($=P.value)==null||$.setPanEnabled(x)}),o.watch(()=>[d.view.zoomEnabled,kr(d.view),En(d.view)],()=>{const x=P.value;x&&Fd(x,d.view.zoomEnabled,d.view.doubleClickZoomEnabled,d.view.mouseWheelZoomEnabled)}),o.watch(v,x=>B(x)),o.watch(()=>[d.view.minZoomLevel,d.view.maxZoomLevel],x=>{B(v.value)});const{scale:L}=Uc(v,d.view);M(()=>{const x=i.zoomLevel;B(x)});const H=()=>ce(this,null,function*(){var x;Object.keys(i.nodes).length>0&&((x=P.value)==null||x.updateBBox(),yield ir())}),N=x=>ce(this,null,function*(){var Le,ve;const $=!x||x.margin===void 0?d.view.fitContentMargin:x.margin;yield H();const z=Z(y.value).getBoundingClientRect(),D=cu($,z),G=uu(Z(S.value),z,me.nodes,v.value,D,d.view.scalingObjects);G?(B(G.zoom),(Le=P.value)==null||Le.pan(G.pos)):(ve=P.value)==null||ve.center(),h.emit("view:fit",void 0)}),R=()=>ce(this,null,function*(){var x;yield H(),(x=P.value)==null||x.center()}),ae=()=>{var x,$;return($=(x=P.value)==null?void 0:x.getViewBox())!=null?$:{top:0,bottom:0,left:0,right:0}},J=x=>{var $;return($=P.value)==null?void 0:$.setViewBox(x)},he=vn(i,"selectedNodes",l,s);o.watch(he,x=>h.emit("node:select",Array.from(x)));const $e=vn(i,"selectedEdges",c,s);o.watch($e,x=>h.emit("edge:select",Array.from(x)));const Ae=vn(i,"selectedPaths",f,s);o.watch(Ae,x=>h.emit("path:select",Array.from(x))),Yc(he,$e,Ae);const ne=ue(new Set),Ve=ue(new Set),He=ue(new Set),me=ue({nodes:{}});Jc(me),o.watch(()=>i.layouts,()=>{var x;return Object.assign(me.nodes,(x=i.layouts.nodes)!=null?x:{})},{deep:!0,immediate:!0}),o.watch(me,()=>s("update:layouts",me),{deep:!0});const yn=Ql(),wn=o.ref(!1);h.on("node:dragstart",x=>wn.value=!0),h.on("node:dragend",x=>wn.value=!1),h.on("view:mode",x=>{var $,z,D,G;d.view.panEnabled&&(x==="default"?($=P.value)==null||$.enablePan():(z=P.value)==null||z.disablePan()),d.view.zoomEnabled&&(x==="default"?(D=P.value)==null||D.enableZoom():(G=P.value)==null||G.disableZoom())});const Pd=o.computed(()=>d.view.panEnabled||d.view.zoomEnabled||d.node.draggable),{nodeStates:xd,edgeStates:Md,pathStates:Cd}=oc(un(l,he,ne),un(c,$e,Ve),un(f,Ae,He),o.readonly(d),me,i.layouts,yn,L),Td=o.computed(()=>En(d.view)),{isBoxSelectionMode:Od,selectionBox:br,startBoxSelection:_d,stopBoxSelection:Bd}=Cc(y,o.readonly(me),o.readonly(v),xd,Md,Cd,he,$e,Ae,ne,Ve,He,u,Td,d,h),yr=()=>({layouts:ue(me.nodes),nodePositions:o.toRef(me,"nodes"),nodes:l,edges:c,configs:o.readonly(d),scale:o.readonly(L),emitter:h,svgPanZoom:Z(P.value)});o.watch(()=>d.view.layoutHandler,(x,$)=>{$.deactivate(),x.activate(yr())});const{transitionWhile:zd,transitionOption:wr}=Xc(),Id=o.computed(()=>{const x=wr.value;return x.enabled?{"--transition-duration":x.duration+"ms","--transition-function":x.timingFunction}:{}});M(()=>ce(this,null,function*(){if(d.view.onBeforeInitialDisplay){const z=d.view.onBeforeInitialDisplay();_l(z)&&(yield z)}const x=Z(P.value,"svg-pan-zoom");d.view.layoutHandler.activate(yr()),yield ir();const $=d.view.autoPanAndZoomOnLoad;if(d.view.fit||$!==!1){const z=Object.keys(i.nodes).length==0,D=x.getPan();if(z||$==="center-zero"){yield H();const G=x.getSizes();x.pan({x:G.width/2,y:G.height/2})}else $==="fit-content"||d.view.fit?yield N():$==="center-content"?yield R():yield H();o.nextTick(()=>{const G=x.getPan();D.x===G.x&&D.y===G.y&&h.emit("view:pan",G)})}else yield H();h.emit("view:load"),b.value=1})),_(()=>{b.value=2,h.emit("view:unload"),d.view.layoutHandler.deactivate()});function $d(){var x;(x=P.value)==null||x.zoomIn()}function Ad(){var x;(x=P.value)==null||x.zoomOut()}function Ld(x){var $;($=P.value)==null||$.pan(x)}function Nd(x){var $;($=P.value)==null||$.panBy(x)}function jd(){return Z(P.value).getPan()}function Dd(){const x=Z(P.value).getSizes();return{width:x.width,height:x.height,viewBox:x.viewBox}}function Zd(x){return pn(Z(y.value,"svg"),Z(S.value,"viewport"),x)}function Rd(x){return wc(Z(y.value,"svg"),Z(S.value,"viewport"),x)}function Vd(){return Xo(Z(y.value,"svg"),Z(S.value,"viewport"),L.value).outerHTML}function Hd(){return ce(this,arguments,function*(x={}){return(yield Er(x)).outerHTML})}function Er(){return ce(this,arguments,function*(x={}){return kc(Z(y.value,"svg"),Z(S.value,"viewport"),L.value,x)})}t({fitToContents:N,panToCenter:R,getViewBox:ae,setViewBox:J,transitionWhile:zd,startBoxSelection:_d,stopBoxSelection:Bd,zoomIn:$d,zoomOut:Ad,panTo:Ld,panBy:Nd,getPan:jd,getSizes:Dd,translateFromDomToSvgCoordinates:Zd,translateFromSvgToDomCoordinates:Rd,getAsSvg:Vd,exportAsSvgText:Hd,exportAsSvgElement:Er});function Fd(x,$,z,D){x.setZoomEnabled($),$&&z?x.enableDblClickZoom():x.disableDblClickZoom(),$&&D?x.enableMouseWheelZoom():x.disableMouseWheelZoom()}function kr(x){return x.zoomEnabled&&x.doubleClickZoomEnabled}function En(x){return x.zoomEnabled&&x.mouseWheelZoomEnabled}function Sr(x){x.stopPropagation()}return(x,$)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"container",ref:m,class:"v-network-graph v-ng-container"},[(o.openBlock(),o.createElementBlock("svg",{ref_key:"svg",ref:y,class:o.normalizeClass(["v-ng-canvas",{show:p.value,dragging:wn.value,touches:Pd.value,"box-selection-mode":o.unref(Od)}]),width:"100%",height:"100%"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(g.value.root,z=>o.renderSlot(x.$slots,z,{key:z,scale:o.unref(L)})),128)),Object.keys(o.unref(yn).markers).length>0?(o.openBlock(),o.createElementBlock("defs",md,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(yn).markers,(z,D)=>(o.openBlock(),o.createBlock(Su,{id:D,key:D,marker:z,scale:o.unref(L)},null,8,["id","marker","scale"]))),128))])):o.createCommentVNode("",!0),k.value?(o.openBlock(),o.createBlock(_u,{key:1},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(g.value.background,z=>(o.openBlock(),o.createElementBlock("g",{key:z,class:"v-ng-layer"},[o.renderSlot(x.$slots,z,{scale:o.unref(L)})]))),128)),E.value?(o.openBlock(),o.createBlock(Ou,{key:0})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(g.value.grid,z=>(o.openBlock(),o.createElementBlock("g",{key:z,class:"v-ng-layer"},[o.renderSlot(x.$slots,z,{scale:o.unref(L)})]))),128))]),_:3})):o.createCommentVNode("",!0),o.createElementVNode("g",{ref_key:"viewport",ref:S,class:o.normalizeClass(["v-ng-viewport",{"v-ng-transition":o.unref(wr).enabled}]),style:o.normalizeStyle(Id.value)},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(g.value.base,z=>(o.openBlock(),o.createElementBlock("g",{key:z,class:"v-ng-layer"},[o.renderSlot(x.$slots,z,{scale:o.unref(L)})]))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(w),z=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:z},[z==="edges"?(o.openBlock(),o.createBlock(qu,{key:0},o.createSlots({_:2},["edge-overlay"in o.unref(a)?{name:"edge-overlay",fn:o.withCtx(D=>[o.renderSlot(x.$slots,"edge-overlay",o.mergeProps({ref_for:!0},D))]),key:"0"}:void 0]),1024)):z==="edge-labels"?(o.openBlock(),o.createBlock(ed,{key:1,"enable-edge-label":"edge-label"in o.unref(a),"enable-edges-label":"edges-label"in o.unref(a)},{"edge-label":o.withCtx(D=>[o.renderSlot(x.$slots,"edge-label",o.mergeProps({ref_for:!0},D))]),"edges-label":o.withCtx(D=>[o.renderSlot(x.$slots,"edges-label",o.mergeProps({ref_for:!0},D))]),_:3},8,["enable-edge-label","enable-edges-label"])):z==="focusring"?(o.openBlock(),o.createBlock(od,{key:2})):z==="nodes"?(o.openBlock(),o.createBlock(id,{key:3},{"override-node":o.withCtx(D=>[o.renderSlot(x.$slots,"override-node",o.mergeProps({ref_for:!0},D))]),_:3})):z==="node-labels"?(o.openBlock(),o.createBlock(dd,{key:4},{"override-node-label":o.withCtx(D=>[o.renderSlot(x.$slots,"override-node-label",o.mergeProps({ref_for:!0},D))]),_:3})):z==="paths"?(o.openBlock(),o.createBlock(gd,{key:5})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(g.value[z],D=>(o.openBlock(),o.createElementBlock("g",{key:D,class:"v-ng-layer"},[o.renderSlot(x.$slots,D,{scale:o.unref(L)})]))),128))],64))),128))],6),o.unref(br)?(o.openBlock(),o.createBlock(gu,{key:2,box:o.unref(br),config:o.unref(d).view.selection.box},null,8,["box","config"])):o.createCommentVNode("",!0)],2))],512))}}),vd=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},bd={};function yd(e,t){return o.openBlock(),o.createElementBlock("defs",null,[(o.openBlock(),o.createBlock(o.resolveDynamicComponent("style"),null,{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:3}))])}const mr=vd(bd,[["render",yd]]),vr=o.defineComponent({__name:"VEdgeLabel",props:{area:{},config:{},text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(e){const t=e,n=o.ref(0),r=o.ref(0),i=o.ref("middle"),s=o.ref("central"),a=o.ref(0);o.watchEffect(()=>{const c=t.area.source,f=t.area.target;t.align==="source"?(c.above.x==f.above.x?i.value=c.above.y>f.above.y?"start":"end":i.value=c.above.x<f.above.x?"start":"end",t.verticalAlign==="above"?(n.value=c.above.x,r.value=c.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=c.below.x,r.value=c.below.y,s.value="hanging"):(n.value=(c.above.x+c.below.x)/2,r.value=(c.above.y+c.below.y)/2,s.value="central")):t.align==="target"?(c.above.x==f.above.x?i.value=c.above.y<f.above.y?"start":"end":i.value=c.above.x>f.above.x?"start":"end",t.verticalAlign==="above"?(n.value=f.above.x,r.value=f.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=f.below.x,r.value=f.below.y,s.value="hanging"):(n.value=(f.above.x+f.below.x)/2,r.value=(f.above.y+f.below.y)/2,s.value="central")):(i.value="middle",t.verticalAlign==="above"?(n.value=(c.above.x+f.above.x)/2,r.value=(c.above.y+f.above.y)/2,s.value="text-top"):t.verticalAlign==="below"?(n.value=(c.below.x+f.below.x)/2,r.value=(c.below.y+f.below.y)/2,s.value="hanging"):(n.value=(c.above.x+f.below.x)/2,r.value=(c.above.y+f.below.y)/2,s.value="central"));let u=W.fromPositions(c.above,f.above).v.angleDegree();(u<-90||u>=90)&&(u=u+180,u>180&&(u-=360)),a.value=u});const l=o.computed(()=>s.value==="central"&&!t.config.background?it(K({},t.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):t.config);return(c,f)=>(o.openBlock(),o.createBlock(rt,{class:"v-ng-edge-label",text:c.text,x:n.value,y:r.value,config:l.value,"text-anchor":i.value,"dominant-baseline":s.value,transform:`rotate(${a.value} ${n.value} ${r.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),wd=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:vr,VLabelText:rt,VNetworkGraph:gr,VShape:ot,VStyle:mr},Symbol.toStringTag,{value:"Module"})),Ed=10;class kd extends qt{constructor(t={}){super(),this.options=t}setNodePosition(t,n){const r=this.options.grid||Ed;t.value.x=Math.floor(n.x/r)*r,t.value.y=Math.floor(n.y/r)*r}}const Sd=function(e){Object.entries(wd).forEach(([t,n])=>{e.component(t,n)})};A.Config=O,A.GridLayout=kd,A.LayerPositions=q,A.NodeLabelDirection=I,A.SimpleLayout=qt,A.VEdgeLabel=vr,A.VLabelText=rt,A.VNetworkGraph=gr,A.VShape=ot,A.VStyle=mr,A.Vector2D=j,A.configsWithType=El,A.defineConfigs=kl,A.getFullConfigs=Pl,A.install=Sd,A.useStates=le,A.withSelf=gt,Object.defineProperty(A,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.js.map
